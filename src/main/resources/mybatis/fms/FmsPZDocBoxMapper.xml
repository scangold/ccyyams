<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="FmsPZDocBoxMapper">
  <resultMap id="BaseResultMap" type="FmsPZDocBox">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 31 16:05:40 CST 2017.
    -->
    <id column="AC_BOX_ID" jdbcType="CHAR" property="acBoxId" />
    <result column="USER_ID" jdbcType="CHAR" property="userId" />
    <result column="ACDOC_BOX" jdbcType="NVARCHAR" property="acdocBox" />
    <result column="ACDOC_ROOM" jdbcType="NVARCHAR" property="acdocRoom" />
    <result column="ACDOC_CASE" jdbcType="NVARCHAR" property="acdocCase" />
    <result column="ACDOC_ROW" jdbcType="NVARCHAR" property="acdocRow" />
    <result column="ACDOC_COLUME" jdbcType="NVARCHAR" property="acdocColume" />
    <result column="ACDOC_REMARK" jdbcType="NVARCHAR" property="acdocRemark" />
    <result column="isvalid" jdbcType="INTEGER" property="isvalid" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 31 16:05:40 CST 2017.
    -->
    AC_BOX_ID, USER_ID, ACDOC_BOX, ACDOC_ROOM, ACDOC_CASE, ACDOC_ROW, ACDOC_COLUME, ACDOC_REMARK
  </sql>
  <insert id="insertpzdocbox" parameterType="pd">
    insert into fms_pzdocbox (ac_box_id, acdoc_box, 
      acdoc_room, acdoc_case,isvalid)
    values (#{ac_box_id,jdbcType=CHAR}, #{acdoc_box,jdbcType=NVARCHAR}, 
      #{acdoc_room,jdbcType=NVARCHAR}, #{acdoc_case,jdbcType=NVARCHAR}, #{isvalid,jdbcType=INTEGER})
  </insert>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultType="pd">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 31 16:05:40 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from fms_pzdocbox
    where AC_BOX_ID = #{acBoxId,jdbcType=CHAR}
  </select>
   <select id="pzlistid" parameterType="pd" resultType="pd">
   SELECT fms_pzdocbox.ac_box_id FROM fms_pzdocbox
WHERE 1=1
   </select>
   <select id="borrowlist" parameterType="pd" resultType="pd">
select  b.ac_box_id,b.isvalid,b.acdoc_box,b.acdoc_room,b.acdoc_case,b.user_id,c.BORROW_USER_ID,c.CREATETIME,c.DESCRIBLE,c.ENDTIME,c.ISVALID,c.NAME,c.NOWENDTIME,c.RETURN_USER_ID,c.STARTTIME,c.STATE
from  fms_pzborrowcontent a
inner join fms_pzdocbox  b on a.pzboxid = b.ac_box_id
inner join fms_borrow c  on a.borrowid = c.id
where 1=1
  </select>
   <select id="borrowlistPage" parameterType="pd" resultType="pd">
select  ac_box_id,isvalid,acdoc_box,acdoc_room,acdoc_case
from  fms_pzdocbox
where 1=1
<if test="pd.isvalid !=null and pd.isvalid !=''"><!-- 年份检索 -->
and isvalid = #{pd.isvalid}
</if>
  </select>
  <select id="selectByacboxid" parameterType="pd" resultType="pd">
select  ac_box_id,isvalid,acdoc_box,acdoc_room,acdoc_case
from  fms_pzdocbox
where ac_box_id = #{acboxid,jdbcType=CHAR}
  </select>
    <update id="updateBybox" parameterType="pd">
    update fms_pzdocbox
    set isvalid = #{isvalid,jdbcType=INTEGER}
    where ac_box_id = #{ac_box_id,jdbcType=CHAR}
  </update>
    <insert id="insertborrow" parameterType="pd">
    insert into fms_borrow (ID, NAME, DESCRIBLE, 
      STARTTIME, ENDTIME, ISVALID
      )
    values (#{borrowid,jdbcType=CHAR}, #{name,jdbcType=NVARCHAR}, #{describle,jdbcType=NVARCHAR}, 
      #{starttime}, #{endtime}, 
       #{isvalid,jdbcType=INTEGER}
      )
  </insert>
  <insert id="insertborrowpz" parameterType="pd">
    insert into fms_pzborrowcontent (borrowid, pzboxid)
    values (#{borrowid,jdbcType=CHAR}, #{ac_box_id,jdbcType=CHAR}
      )
  </insert>
   <select id="selectreturnByacboxid" parameterType="pd" resultType="pd">
select  b.STARTTIME,b.DESCRIBLE,b.ENDTIME,b.NAME,b.ISVALID,a.pzboxid,b.ID
from  fms_pzborrowcontent a
inner join fms_borrow  b on a.borrowid = b.ID
where pzboxid = #{acboxid,jdbcType=CHAR}  and ISVALID=1
  </select>
  <update id="returnBybox" parameterType="pd">
    update fms_pzdocbox
    set isvalid = #{isvalid,jdbcType=INTEGER}
    where ac_box_id = #{pzboxid,jdbcType=CHAR}
  </update>
  <update id="returnborrow" parameterType="pd">
    update fms_borrow
    set ISVALID = #{isvalid,jdbcType=INTEGER},
    NOWENDTIME = #{NOWENDTIME}
    where ID = #{ID,jdbcType=CHAR}
  </update>
  	<select id="findBoxByIds" resultType="pd" parameterType="String">
		SELECT 
		<include refid="Base_Column_List" />
		 from
		fms_pzdocbox
		where ac_box_id
		 in
		<foreach item="item" index="index" collection="array" open="("
			separator="," close=")">
			#{item}
		</foreach>
	</select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 31 16:05:40 CST 2017.
    -->
    delete from fms_pzdocbox
    where AC_BOX_ID = #{acBoxId,jdbcType=CHAR}
  </delete>
  <insert id="insert" parameterType="FmsPZDocBox">
    insert into fms_pzdocbox (AC_BOX_ID, USER_ID, ACDOC_BOX, 
      ACDOC_ROOM, ACDOC_CASE, ACDOC_ROW, 
      ACDOC_COLUME, ACDOC_REMARK)
    values (#{acBoxId,jdbcType=CHAR}, #{userId,jdbcType=CHAR}, #{acdocBox,jdbcType=NVARCHAR}, 
      #{acdocRoom,jdbcType=NVARCHAR}, #{acdocCase,jdbcType=NVARCHAR}, #{acdocRow,jdbcType=NVARCHAR}, 
      #{acdocColume,jdbcType=NVARCHAR}, #{acdocRemark,jdbcType=NVARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="FmsPZDocBox">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 31 16:05:40 CST 2017.
    -->
    insert into fms_pzdocbox
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="acBoxId != null">
        AC_BOX_ID,
      </if>
      <if test="userId != null">
        USER_ID,
      </if>
      <if test="acdocBox != null">
        ACDOC_BOX,
      </if>
      <if test="acdocRoom != null">
        ACDOC_ROOM,
      </if>
      <if test="acdocCase != null">
        ACDOC_CASE,
      </if>
      <if test="acdocRow != null">
        ACDOC_ROW,
      </if>
      <if test="acdocColume != null">
        ACDOC_COLUME,
      </if>
      <if test="acdocRemark != null">
        ACDOC_REMARK,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="acBoxId != null">
        #{acBoxId,jdbcType=CHAR},
      </if>
      <if test="userId != null">
        #{userId,jdbcType=CHAR},
      </if>
      <if test="acdocBox != null">
        #{acdocBox,jdbcType=NVARCHAR},
      </if>
      <if test="acdocRoom != null">
        #{acdocRoom,jdbcType=NVARCHAR},
      </if>
      <if test="acdocCase != null">
        #{acdocCase,jdbcType=NVARCHAR},
      </if>
      <if test="acdocRow != null">
        #{acdocRow,jdbcType=NVARCHAR},
      </if>
      <if test="acdocColume != null">
        #{acdocColume,jdbcType=NVARCHAR},
      </if>
      <if test="acdocRemark != null">
        #{acdocRemark,jdbcType=NVARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="FmsPZDocBox">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 31 16:05:40 CST 2017.
    -->
    update fms_pzdocbox
    <set>
      <if test="userId != null">
        USER_ID = #{userId,jdbcType=CHAR},
      </if>
      <if test="acdocBox != null">
        ACDOC_BOX = #{acdocBox,jdbcType=NVARCHAR},
      </if>
      <if test="acdocRoom != null">
        ACDOC_ROOM = #{acdocRoom,jdbcType=NVARCHAR},
      </if>
      <if test="acdocCase != null">
        ACDOC_CASE = #{acdocCase,jdbcType=NVARCHAR},
      </if>
      <if test="acdocRow != null">
        ACDOC_ROW = #{acdocRow,jdbcType=NVARCHAR},
      </if>
      <if test="acdocColume != null">
        ACDOC_COLUME = #{acdocColume,jdbcType=NVARCHAR},
      </if>
      <if test="acdocRemark != null">
        ACDOC_REMARK = #{acdocRemark,jdbcType=NVARCHAR},
      </if>
    </set>
    where AC_BOX_ID = #{acBoxId,jdbcType=CHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="FmsPZDocBox">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 31 16:05:40 CST 2017.
    -->
    update fms_pzdocbox
    set USER_ID = #{userId,jdbcType=CHAR},
      ACDOC_BOX = #{acdocBox,jdbcType=NVARCHAR},
      ACDOC_ROOM = #{acdocRoom,jdbcType=NVARCHAR},
      ACDOC_CASE = #{acdocCase,jdbcType=NVARCHAR},
      ACDOC_ROW = #{acdocRow,jdbcType=NVARCHAR},
      ACDOC_COLUME = #{acdocColume,jdbcType=NVARCHAR},
      ACDOC_REMARK = #{acdocRemark,jdbcType=NVARCHAR}
    where AC_BOX_ID = #{acBoxId,jdbcType=CHAR}
  </update>
   <update id="updateByPzdocbox" parameterType="pd">
    update fms_pzdocbox
    set 
      acdoc_room = #{acdoc_room,jdbcType=NVARCHAR},
      acdoc_case = #{acdoc_case,jdbcType=NVARCHAR}
    where ac_box_id = #{ac_box_id,jdbcType=CHAR}
  </update>
</mapper>