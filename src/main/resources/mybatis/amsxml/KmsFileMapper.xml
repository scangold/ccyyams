<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="KmsFileMapper">
  <resultMap id="BaseResultMap" type="KmsFile">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 18:10:52 CST 2017.
    -->
    <id column="KFILE_ID" jdbcType="INTEGER" property="kfileId" />
    <result column="PRJ_ID" jdbcType="INTEGER" property="prjId" />
    <result column="PRJ_NAME_INPUT" jdbcType="NVARCHAR" property="prjNameInput" />
    <result column="CEQUNAME" jdbcType="NVARCHAR" property="cequname" />
    <result column="KFILE_NUM" jdbcType="NVARCHAR" property="kfileNum" />
    <result column="KFILE_NAME" jdbcType="NVARCHAR" property="kfileName" />
    <result column="CREATETIME" jdbcType="TIMESTAMP" property="createtime" />
    <result column="PAGE" jdbcType="INTEGER" property="page" />
    <result column="KFILE_LIMIT" jdbcType="NVARCHAR" property="kfileLimit" />
    <result column="STORAGEPLACE" jdbcType="NVARCHAR" property="storageplace" />
    <result column="MIJI" jdbcType="NVARCHAR" property="miji" />
    <result column="MULU" jdbcType="NVARCHAR" property="mulu" />
    <result column="REMARK" jdbcType="NVARCHAR" property="remark" />
    <result column="REALSTORAGE_ID" jdbcType="INTEGER" property="realstorageId" />
    <result column="IFEXIST" jdbcType="BIT" property="ifexist" />
    <result column="COPYSTATUS" jdbcType="NVARCHAR" property="copystatus" />
    <result column="JIESHOUREN_INPUT" jdbcType="NVARCHAR" property="jieshourenInput" />
    <result column="BUMEN_INPUT" jdbcType="NVARCHAR" property="bumenInput" />
    <result column="YIJIAOREN_INPUT" jdbcType="NVARCHAR" property="yijiaorenInput" />
    <result column="YJBUMEN_INPUT" jdbcType="NVARCHAR" property="yjbumenInput" />
    <result column="JIESHOU_TIME" jdbcType="TIMESTAMP" property="jieshouTime" />
    <result column="YIJIAO_TIME" jdbcType="TIMESTAMP" property="yijiaoTime" />
    <result column="TYPE_ID" jdbcType="INTEGER" property="typeId" />
    <result column="KFBOXID" jdbcType="CHAR" property="kfboxid" />
  </resultMap>
  <resultMap id="BaseAddFileMap" type="KmsFile">
    <id column="KFILE_ID" jdbcType="INTEGER" property="kfileId" />
    <result column="PRJ_ID" jdbcType="INTEGER" property="prjId" />
    <result column="PRJ_NAME_INPUT" jdbcType="NVARCHAR" property="prjNameInput" />
    <result column="CEQUNAME" jdbcType="NVARCHAR" property="cequname" />
    <result column="KFILE_NUM" jdbcType="NVARCHAR" property="kfileNum" />
    <result column="KFILE_NAME" jdbcType="NVARCHAR" property="kfileName" />
    <result column="CREATETIME" jdbcType="TIMESTAMP" property="createtime" />
    <result column="PAGE" jdbcType="INTEGER" property="page" />
    <result column="KFILE_LIMIT" jdbcType="NVARCHAR" property="kfileLimit" />
    <result column="STORAGEPLACE" jdbcType="NVARCHAR" property="storageplace" />
    <result column="MIJI" jdbcType="NVARCHAR" property="miji" />
    <result column="MULU" jdbcType="NVARCHAR" property="mulu" />
    <result column="REMARK" jdbcType="NVARCHAR" property="remark" />
    <result column="REALSTORAGE_ID" jdbcType="INTEGER" property="realstorageId" />
    <result column="IFEXIST" jdbcType="BIT" property="ifexist" />
    <result column="COPYSTATUS" jdbcType="NVARCHAR" property="copystatus" />
    <result column="JIESHOUREN_INPUT" jdbcType="NVARCHAR" property="jieshourenInput" />
    <result column="BUMEN_INPUT" jdbcType="NVARCHAR" property="bumenInput" />
    <result column="YIJIAOREN_INPUT" jdbcType="NVARCHAR" property="yijiaorenInput" />
    <result column="YJBUMEN_INPUT" jdbcType="NVARCHAR" property="yjbumenInput" />
    <result column="JIESHOU_TIME" jdbcType="TIMESTAMP" property="jieshouTime" />
    <result column="YIJIAO_TIME" jdbcType="TIMESTAMP" property="yijiaoTime" />
    <result column="TYPE_ID" jdbcType="INTEGER" property="typeId" />
    <result column="KFBOXID" jdbcType="CHAR" property="kfboxid" />
	<collection  column="KFILE_ID" javaType="ArrayList" property="kmsAddFiles" 
		select="KmsAddFileMapper.selectByForeignKey" ofType="KmsAddFile"></collection>
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 18:10:52 CST 2017.
    -->
    KFILE_ID, PRJ_ID, PRJ_NAME_INPUT, CEQUNAME, KFILE_NUM, KFILE_NAME, CREATETIME, PAGE, 
    KFILE_LIMIT, STORAGEPLACE, MIJI, MULU, REMARK, REALSTORAGE_ID, IFEXIST, COPYSTATUS, 
    JIESHOUREN_INPUT, BUMEN_INPUT, YIJIAOREN_INPUT, YJBUMEN_INPUT, JIESHOU_TIME, YIJIAO_TIME, 
    TYPE_ID, KFBOXID
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 18:10:52 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from kms_file
    where KFILE_ID = #{kfileId,jdbcType=INTEGER}
  </select>
  <select id="selectByPrimaryKey1" parameterType="java.lang.Integer" resultMap="BaseAddFileMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 18:10:52 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from kms_file
    where KFILE_ID = #{kfileId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 18:10:52 CST 2017.
    -->
    delete from kms_file
    where KFILE_ID = #{kfileId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.fh.entity.amsmodel.KmsFile">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 18:10:52 CST 2017.
    -->
    insert into kms_file (KFILE_ID, PRJ_ID, PRJ_NAME_INPUT, 
      CEQUNAME, KFILE_NUM, KFILE_NAME, 
      CREATETIME, PAGE, KFILE_LIMIT, 
      STORAGEPLACE, MIJI, MULU, 
      REMARK, REALSTORAGE_ID, IFEXIST, 
      COPYSTATUS, JIESHOUREN_INPUT, BUMEN_INPUT, 
      YIJIAOREN_INPUT, YJBUMEN_INPUT, JIESHOU_TIME, 
      YIJIAO_TIME, TYPE_ID, KFBOXID
      )
    values (#{kfileId,jdbcType=INTEGER}, #{prjId,jdbcType=INTEGER}, #{prjNameInput,jdbcType=NVARCHAR}, 
      #{cequname,jdbcType=NVARCHAR}, #{kfileNum,jdbcType=NVARCHAR}, #{kfileName,jdbcType=NVARCHAR}, 
      #{createtime,jdbcType=TIMESTAMP}, #{page,jdbcType=INTEGER}, #{kfileLimit,jdbcType=NVARCHAR}, 
      #{storageplace,jdbcType=NVARCHAR}, #{miji,jdbcType=NVARCHAR}, #{mulu,jdbcType=NVARCHAR}, 
      #{remark,jdbcType=NVARCHAR}, #{realstorageId,jdbcType=INTEGER}, #{ifexist,jdbcType=BIT}, 
      #{copystatus,jdbcType=NVARCHAR}, #{jieshourenInput,jdbcType=NVARCHAR}, #{bumenInput,jdbcType=NVARCHAR}, 
      #{yijiaorenInput,jdbcType=NVARCHAR}, #{yjbumenInput,jdbcType=NVARCHAR}, #{jieshouTime,jdbcType=TIMESTAMP}, 
      #{yijiaoTime,jdbcType=TIMESTAMP}, #{typeId,jdbcType=INTEGER}, #{kfboxid,jdbcType=CHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.fh.entity.amsmodel.KmsFile">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 18:10:52 CST 2017.
    -->
    insert into kms_file
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="kfileId != null">
        KFILE_ID,
      </if>
      <if test="prjId != null">
        PRJ_ID,
      </if>
      <if test="prjNameInput != null">
        PRJ_NAME_INPUT,
      </if>
      <if test="cequname != null">
        CEQUNAME,
      </if>
      <if test="kfileNum != null">
        KFILE_NUM,
      </if>
      <if test="kfileName != null">
        KFILE_NAME,
      </if>
      <if test="createtime != null">
        CREATETIME,
      </if>
      <if test="page != null">
        PAGE,
      </if>
      <if test="kfileLimit != null">
        KFILE_LIMIT,
      </if>
      <if test="storageplace != null">
        STORAGEPLACE,
      </if>
      <if test="miji != null">
        MIJI,
      </if>
      <if test="mulu != null">
        MULU,
      </if>
      <if test="remark != null">
        REMARK,
      </if>
      <if test="realstorageId != null">
        REALSTORAGE_ID,
      </if>
      <if test="ifexist != null">
        IFEXIST,
      </if>
      <if test="copystatus != null">
        COPYSTATUS,
      </if>
      <if test="jieshourenInput != null">
        JIESHOUREN_INPUT,
      </if>
      <if test="bumenInput != null">
        BUMEN_INPUT,
      </if>
      <if test="yijiaorenInput != null">
        YIJIAOREN_INPUT,
      </if>
      <if test="yjbumenInput != null">
        YJBUMEN_INPUT,
      </if>
      <if test="jieshouTime != null">
        JIESHOU_TIME,
      </if>
      <if test="yijiaoTime != null">
        YIJIAO_TIME,
      </if>
      <if test="typeId != null">
        TYPE_ID,
      </if>
      <if test="kfboxid != null">
        KFBOXID,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="kfileId != null">
        #{kfileId,jdbcType=INTEGER},
      </if>
      <if test="prjId != null">
        #{prjId,jdbcType=INTEGER},
      </if>
      <if test="prjNameInput != null">
        #{prjNameInput,jdbcType=NVARCHAR},
      </if>
      <if test="cequname != null">
        #{cequname,jdbcType=NVARCHAR},
      </if>
      <if test="kfileNum != null">
        #{kfileNum,jdbcType=NVARCHAR},
      </if>
      <if test="kfileName != null">
        #{kfileName,jdbcType=NVARCHAR},
      </if>
      <if test="createtime != null">
        #{createtime,jdbcType=TIMESTAMP},
      </if>
      <if test="page != null">
        #{page,jdbcType=INTEGER},
      </if>
      <if test="kfileLimit != null">
        #{kfileLimit,jdbcType=NVARCHAR},
      </if>
      <if test="storageplace != null">
        #{storageplace,jdbcType=NVARCHAR},
      </if>
      <if test="miji != null">
        #{miji,jdbcType=NVARCHAR},
      </if>
      <if test="mulu != null">
        #{mulu,jdbcType=NVARCHAR},
      </if>
      <if test="remark != null">
        #{remark,jdbcType=NVARCHAR},
      </if>
      <if test="realstorageId != null">
        #{realstorageId,jdbcType=INTEGER},
      </if>
      <if test="ifexist != null">
        #{ifexist,jdbcType=BIT},
      </if>
      <if test="copystatus != null">
        #{copystatus,jdbcType=NVARCHAR},
      </if>
      <if test="jieshourenInput != null">
        #{jieshourenInput,jdbcType=NVARCHAR},
      </if>
      <if test="bumenInput != null">
        #{bumenInput,jdbcType=NVARCHAR},
      </if>
      <if test="yijiaorenInput != null">
        #{yijiaorenInput,jdbcType=NVARCHAR},
      </if>
      <if test="yjbumenInput != null">
        #{yjbumenInput,jdbcType=NVARCHAR},
      </if>
      <if test="jieshouTime != null">
        #{jieshouTime,jdbcType=TIMESTAMP},
      </if>
      <if test="yijiaoTime != null">
        #{yijiaoTime,jdbcType=TIMESTAMP},
      </if>
      <if test="typeId != null">
        #{typeId,jdbcType=INTEGER},
      </if>
      <if test="kfboxid != null">
        #{kfboxid,jdbcType=CHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.fh.entity.amsmodel.KmsFile">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 18:10:52 CST 2017.
    -->
    update kms_file
    <set>
      <if test="prjId != null">
        PRJ_ID = #{prjId,jdbcType=INTEGER},
      </if>
      <if test="prjNameInput != null">
        PRJ_NAME_INPUT = #{prjNameInput,jdbcType=NVARCHAR},
      </if>
      <if test="cequname != null">
        CEQUNAME = #{cequname,jdbcType=NVARCHAR},
      </if>
      <if test="kfileNum != null">
        KFILE_NUM = #{kfileNum,jdbcType=NVARCHAR},
      </if>
      <if test="kfileName != null">
        KFILE_NAME = #{kfileName,jdbcType=NVARCHAR},
      </if>
      <if test="createtime != null">
        CREATETIME = #{createtime,jdbcType=TIMESTAMP},
      </if>
      <if test="page != null">
        PAGE = #{page,jdbcType=INTEGER},
      </if>
      <if test="kfileLimit != null">
        KFILE_LIMIT = #{kfileLimit,jdbcType=NVARCHAR},
      </if>
      <if test="storageplace != null">
        STORAGEPLACE = #{storageplace,jdbcType=NVARCHAR},
      </if>
      <if test="miji != null">
        MIJI = #{miji,jdbcType=NVARCHAR},
      </if>
      <if test="mulu != null">
        MULU = #{mulu,jdbcType=NVARCHAR},
      </if>
      <if test="remark != null">
        REMARK = #{remark,jdbcType=NVARCHAR},
      </if>
      <if test="realstorageId != null">
        REALSTORAGE_ID = #{realstorageId,jdbcType=INTEGER},
      </if>
      <if test="ifexist != null">
        IFEXIST = #{ifexist,jdbcType=BIT},
      </if>
      <if test="copystatus != null">
        COPYSTATUS = #{copystatus,jdbcType=NVARCHAR},
      </if>
      <if test="jieshourenInput != null">
        JIESHOUREN_INPUT = #{jieshourenInput,jdbcType=NVARCHAR},
      </if>
      <if test="bumenInput != null">
        BUMEN_INPUT = #{bumenInput,jdbcType=NVARCHAR},
      </if>
      <if test="yijiaorenInput != null">
        YIJIAOREN_INPUT = #{yijiaorenInput,jdbcType=NVARCHAR},
      </if>
      <if test="yjbumenInput != null">
        YJBUMEN_INPUT = #{yjbumenInput,jdbcType=NVARCHAR},
      </if>
      <if test="jieshouTime != null">
        JIESHOU_TIME = #{jieshouTime,jdbcType=TIMESTAMP},
      </if>
      <if test="yijiaoTime != null">
        YIJIAO_TIME = #{yijiaoTime,jdbcType=TIMESTAMP},
      </if>
      <if test="typeId != null">
        TYPE_ID = #{typeId,jdbcType=INTEGER},
      </if>
      <if test="kfboxid != null">
        KFBOXID = #{kfboxid,jdbcType=CHAR},
      </if>
    </set>
    where KFILE_ID = #{kfileId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.fh.entity.amsmodel.KmsFile">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 18:10:52 CST 2017.
    -->
    update kms_file
    set PRJ_ID = #{prjId,jdbcType=INTEGER},
      PRJ_NAME_INPUT = #{prjNameInput,jdbcType=NVARCHAR},
      CEQUNAME = #{cequname,jdbcType=NVARCHAR},
      KFILE_NUM = #{kfileNum,jdbcType=NVARCHAR},
      KFILE_NAME = #{kfileName,jdbcType=NVARCHAR},
      CREATETIME = #{createtime,jdbcType=TIMESTAMP},
      PAGE = #{page,jdbcType=INTEGER},
      KFILE_LIMIT = #{kfileLimit,jdbcType=NVARCHAR},
      STORAGEPLACE = #{storageplace,jdbcType=NVARCHAR},
      MIJI = #{miji,jdbcType=NVARCHAR},
      MULU = #{mulu,jdbcType=NVARCHAR},
      REMARK = #{remark,jdbcType=NVARCHAR},
      REALSTORAGE_ID = #{realstorageId,jdbcType=INTEGER},
      IFEXIST = #{ifexist,jdbcType=BIT},
      COPYSTATUS = #{copystatus,jdbcType=NVARCHAR},
      JIESHOUREN_INPUT = #{jieshourenInput,jdbcType=NVARCHAR},
      BUMEN_INPUT = #{bumenInput,jdbcType=NVARCHAR},
      YIJIAOREN_INPUT = #{yijiaorenInput,jdbcType=NVARCHAR},
      YJBUMEN_INPUT = #{yjbumenInput,jdbcType=NVARCHAR},
      JIESHOU_TIME = #{jieshouTime,jdbcType=TIMESTAMP},
      YIJIAO_TIME = #{yijiaoTime,jdbcType=TIMESTAMP},
      TYPE_ID = #{typeId,jdbcType=INTEGER},
      KFBOXID = #{kfboxid,jdbcType=CHAR}
    where KFILE_ID = #{kfileId,jdbcType=INTEGER}
  </update>

  <update id="updateByPrimaryKey1" parameterType="pd">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 18:10:52 CST 2017.
    -->
    update kms_file
    set PRJ_ID = #{prjId},
      PRJ_NAME_INPUT = #{prjNameInput},
      CEQUNAME = #{cequname,},
      KFILE_NUM = #{kfileNum},
      KFILE_NAME = #{kfileName},
      CREATETIME = #{createtime},
      PAGE = #{page},
      KFILE_LIMIT = #{kfileLimit},
      STORAGEPLACE = #{storageplace},
      MIJI = #{mijiR},
      MULU = #{mulu},
      REMARK = #{remark},
      REALSTORAGE_ID = #{realstorageId},
      IFEXIST = #{ifexist},
      COPYSTATUS = #{copystatus},
      JIESHOUREN_INPUT = #{jieshourenInput},
      BUMEN_INPUT = #{bumenInput},
      YIJIAOREN_INPUT = #{yijiaorenInput},
      YJBUMEN_INPUT = #{yjbumenInput},
      JIESHOU_TIME = #{jieshouTime},
      YIJIAO_TIME = #{yijiaoTime,},
      TYPE_ID = #{typeId},
      KFBOXID = #{kfboxid}
    where KFILE_ID = #{kfileId}
  </update>

  

  <select id="listKmsFileByBoxId" parameterType="page" resultType="pd">
		SELECT
		<include refid="Base_Column_List" />
		FROM kms_file kf
		where 1=1
		<if test="pd.serchkmskey != null and pd.serchkmskey != ''"><!-- 关键词检索 -->
			and
			(
			kf.KFILE_NAME LIKE CONCAT(CONCAT('%', #{pd.serchkmskey}),'%')
			or
			kf.PRJ_NAME_INPUT
			LIKE CONCAT(CONCAT('%', #{pd.serchkmskey}),'%')
			or
			kf.PRJ_ID LIKE
			CONCAT(CONCAT('%', #{pd.serchkmskey}),'%')			
			)
		</if>
		<if test="pd.prjId!= null and pd.prjId != ''">
			and  kf.PRJ_ID= #{pd.prjId,jdbcType=NUMERIC}
		</if>
		<if test="pd.prjNameInput!= null and pd.prjNameInput != ''">
			and  kf.PRJ_NAME_INPUT= #{pd.prjNameInput,jdbcType=NUMERIC}
		</if>
		<if test="pd.cequname!= null and pd.cequname != ''">
			and  kf.CEQUNAME = #{pd.cequname,jdbcType=NVARCHAR}
		</if>
		<if test="pd.kfileNum!= null and pd.kfileNum != ''">
			and  kf.KFILE_NUM = #{pd.kfileNum,jdbcType=NVARCHAR}
		</if>
		<if test="pd.kfileName!= null and pd.kfileName != ''">
			and  kf.KFILE_NAME = #{pd.kfileName,jdbcType=NVARCHAR}
		</if>
		<if test="pd.createtime!= null and pd.createtime != ''">
			and  kf.CREATETIME = #{pd.createtime,jdbcType=TIMESTAMP}
		</if>
		<if test="pd.page!= null and pd.page != ''">
			and  kf.PAGE = #{pd.page,jdbcType=INTEGER}
		</if>
		<if test="pd.kfileLimit!= null and pd.kfileLimit != ''">
			and  kf.KFILE_LIMIT = #{pd.kfileLimit,jdbcType=NVARCHAR}
		</if>
		<if test="pd.storageplace!= null and pd.storageplace != ''">
			and  kf.STORAGEPLACE = #{pd.storageplace,jdbcType=NVARCHAR}
		</if>
		<if test="pd.miji!= null and pd.miji != ''">
			and  kf.MIJI = #{pd.miji,jdbcType=NVARCHAR}
		</if>
		<if test="pd.mulu!= null and pd.mulu != ''">
			and  kf.MULU = #{pd.mulu,jdbcType=NVARCHAR}
		</if>
		<if test="pd.remark!= null and pd.remark != ''">
			and  kf.REMARK = #{pd.remark,jdbcType=NVARCHAR}
		</if>
		<if test="pd.realstorageId!= null and pd.realstorageId != ''">
			and  kf.REALSTORAGE_ID = #{pd.realstorageId,jdbcType=INTEGER}
		</if>
		<if test="pd.ifexist!= null and pd.ifexist != ''">
			and  kf.IFEXIST = #{pd.ifexist,jdbcType=BIT}
		</if>
		<if test="pd.copystatus!= null and pd.copystatus != ''">
			and  kf.COPYSTATUS = #{pd.copystatus,jdbcType=NVARCHAR}
		</if>
		<if test="pd.jieshourenInput!= null and pd.jieshourenInput != ''">
			and  kf.JIESHOUREN_INPUT = #{pd.jieshourenInput,jdbcType=NVARCHAR}
		</if>
		<if test="pd.bumenInput!= null and pd.bumenInput != ''">
			and  kf.BUMEN_INPUT = #{pd.bumenInput,jdbcType=NVARCHAR}
		</if>
		<if test="pd.yijiaorenInput!= null and pd.yijiaorenInput != ''">
			and  kf.YIJIAOREN_INPUT = #{pd.yijiaorenInput,jdbcType=NVARCHAR}
		</if>
		<if test="pd.yjbumenInput!= null and pd.yjbumenInput != ''">
			and  kf.YJBUMEN_INPUT = #{pd.yjbumenInput,jdbcType=NVARCHAR}
		</if>
		<if test="pd.jieshouTime!= null and pd.jieshouTime != ''">
			and  kf.JIESHOU_TIME = #{pd.jieshouTime,jdbcType=TIMESTAMP}
		</if>
		<if test="pd.yijiaoTime!= null and pd.yijiaoTime != ''">
			and  kf.YIJIAO_TIME = #{pd.yijiaoTime,jdbcType=TIMESTAMP}
		</if>
		<if test="pd.typeId!= null and pd.typeId != ''">
			and  kf.TYPE_ID = #{pd.typeId,jdbcType=INTEGER}
		</if>
		<if test="pd.kfboxid!= null and pd.kfboxid != ''">
			and  kf.KFBOXID = #{pd.kfboxid,jdbcType=CHAR}
		</if>
		
		
	</select>
	
<!-- 2017年8月19日11:31:49
    KFILE_ID, PRJ_ID, PRJ_NAME_INPUT, CEQUNAME, KFILE_NUM, KFILE_NAME, CREATETIME, PAGE, 
    KFILE_LIMIT, STORAGEPLACE, MIJI, MULU, REMARK, REALSTORAGE_ID, IFEXIST, COPYSTATUS, 
    JIESHOUREN_INPUT, BUMEN_INPUT, YIJIAOREN_INPUT, YJBUMEN_INPUT, JIESHOU_TIME, YIJIAO_TIME, 
    TYPE_ID, KFBOXID -->
	<select id="listPage" parameterType="page" resultType="pd">
		select
		<include refid="Base_Column_List" />
		from kms_file kf
		where 1=1
		<if test="pd.keywords!= null and pd.keywords != ''"><!-- 关键词检索 -->
			and
			(
			kf.TITLE LIKE CONCAT(CONCAT('%', #{pd.keywords}),'%')
			or
			kf.KEYWORD
			LIKE CONCAT(CONCAT('%', #{pd.keywords}),'%')
			or
			kf.PRECISE LIKE
			CONCAT(CONCAT('%', #{pd.keywords}),'%')
			)
		</if>
		<if test="pd.pid!= null and pd.pid != ''"><!-- 关键词检索 -->
			and  kf.KFBOXID= #{pd.pid,jdbcType=CHAR}			
		</if>



	</select>
	
  <insert id="save" parameterType="com.fh.entity.amsmodel.KmsFile">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Sep 18 18:10:52 CST 2017.
    -->
    insert into kms_file (PRJ_ID, PRJ_NAME_INPUT, 
      CEQUNAME, KFILE_NUM, KFILE_NAME, 
      CREATETIME, PAGE, KFILE_LIMIT, 
      STORAGEPLACE, MIJI, MULU, 
      REMARK, REALSTORAGE_ID, IFEXIST, 
      COPYSTATUS, JIESHOUREN_INPUT, BUMEN_INPUT, 
      YIJIAOREN_INPUT, YJBUMEN_INPUT, JIESHOU_TIME, 
      YIJIAO_TIME, TYPE_ID, KFBOXID
      )
    values (#{prjId,jdbcType=INTEGER}, #{prjNameInput,jdbcType=NVARCHAR}, 
      #{cequname,jdbcType=NVARCHAR}, #{kfileNum,jdbcType=NVARCHAR}, #{kfileName,jdbcType=NVARCHAR}, 
      #{createtime,jdbcType=TIMESTAMP}, #{page,jdbcType=INTEGER}, #{kfileLimit,jdbcType=NVARCHAR}, 
      #{storageplace,jdbcType=NVARCHAR}, #{miji,jdbcType=NVARCHAR}, #{mulu,jdbcType=NVARCHAR}, 
      #{remark,jdbcType=NVARCHAR}, #{realstorageId,jdbcType=INTEGER}, #{ifexist,jdbcType=BIT}, 
      #{copystatus,jdbcType=NVARCHAR}, #{jieshourenInput,jdbcType=NVARCHAR}, #{bumenInput,jdbcType=NVARCHAR}, 
      #{yijiaorenInput,jdbcType=NVARCHAR}, #{yjbumenInput,jdbcType=NVARCHAR}, #{jieshouTime,jdbcType=TIMESTAMP}, 
      #{yijiaoTime,jdbcType=TIMESTAMP}, #{typeId,jdbcType=INTEGER}, #{kfboxid,jdbcType=CHAR}
      )
  </insert>
	<select id="countAMSYEAR" resultType="pd">
		select count(1) as count ,YEAR from  ams_file  WHERE YEAR IS NOT NULL AND YEAR!='' AND YEAR!='CurentDate();' group by YEAR  ORDER by YEAR 
	</select>
	
	<select id="countKMSYEAR" resultType="pd">
		select count(1) as count ,MONTH(JIESHOU_TIME) as jst from  kms_file group by JIESHOU_TIME   ORDER by JIESHOU_TIME 
	</select>
	
	
</mapper>