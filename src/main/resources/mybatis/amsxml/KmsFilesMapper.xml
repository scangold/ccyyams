<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="KmsFilesMapper">
  <resultMap id="BaseResultMap" type="com.fh.entity.amsmodel.KmsFiles">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 23 15:20:15 CST 2017.
    -->
    <id column="KFILES_ID" jdbcType="INTEGER" property="kfilesId" />
    <result column="PRJ_ID" jdbcType="INTEGER" property="prjId" />
    <result column="PRJ_NAME_INPUT" jdbcType="NVARCHAR" property="prjNameInput" />
    <result column="CEQUNAME" jdbcType="NVARCHAR" property="cequname" />
    <result column="LE" jdbcType="INTEGER" property="le" />
    <result column="KFILES_BOX_NUM" jdbcType="NVARCHAR" property="kfilesBoxNum" />
    <result column="KFILES_BOX_NAME" jdbcType="NVARCHAR" property="kfilesBoxName" />
    <result column="CREATETIME" jdbcType="TIMESTAMP" property="createtime" />
    <result column="LFT" jdbcType="INTEGER" property="lft" />
    <result column="RT" jdbcType="INTEGER" property="rt" />
    <result column="PAGE" jdbcType="INTEGER" property="page" />
    <result column="KFILES_LIMIT" jdbcType="NVARCHAR" property="kfilesLimit" />
    <result column="STORAGEPLACE" jdbcType="NVARCHAR" property="storageplace" />
    <result column="KFILES_NUM" jdbcType="NVARCHAR" property="kfilesNum" />
    <result column="MIJI" jdbcType="NVARCHAR" property="miji" />
    <result column="MULU" jdbcType="NVARCHAR" property="mulu" />
    <result column="REMARK" jdbcType="NVARCHAR" property="remark" />
    <result column="REALSTORAGE_ID" jdbcType="INTEGER" property="realstorageId" />
    <result column="IFEXIST" jdbcType="BIT" property="ifexist" />
    <result column="COPY" jdbcType="NVARCHAR" property="copy" />
    <result column="JIESHOUREN_INPUT" jdbcType="NVARCHAR" property="jieshourenInput" />
    <result column="BUMEN_INPUT" jdbcType="NVARCHAR" property="bumenInput" />
    <result column="YIJIAOREN_INPUT" jdbcType="NVARCHAR" property="yijiaorenInput" />
    <result column="YJBUMEN_INPUT" jdbcType="NVARCHAR" property="yjbumenInput" />
    <result column="JIESHOU_TIME" jdbcType="TIMESTAMP" property="jieshouTime" />
    <result column="YIJIAO_TIME" jdbcType="TIMESTAMP" property="yijiaoTime" />
    <result column="TYPE_ID" jdbcType="INTEGER" property="typeId" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 23 15:20:15 CST 2017.
    -->
    KFILES_ID, PRJ_ID, PRJ_NAME_INPUT, CEQUNAME, LE, KFILES_BOX_NUM, KFILES_BOX_NAME, 
    CREATETIME, LFT, RT, PAGE, KFILES_LIMIT, STORAGEPLACE, KFILES_NUM, MIJI, MULU, REMARK, 
    REALSTORAGE_ID, IFEXIST, COPY, JIESHOUREN_INPUT, BUMEN_INPUT, YIJIAOREN_INPUT, YJBUMEN_INPUT, 
    JIESHOU_TIME, YIJIAO_TIME, TYPE_ID
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 23 15:20:15 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from kms_files
    where KFILES_ID = #{kfilesId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 23 15:20:15 CST 2017.
    -->
    delete from kms_files
    where KFILES_ID = #{kfilesId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.fh.entity.amsmodel.KmsFiles">
    insert into kms_files (KFILES_ID, PRJ_ID, PRJ_NAME_INPUT, 
      CEQUNAME, LE, KFILES_BOX_NUM, 
      KFILES_BOX_NAME, CREATETIME, LFT, 
      RT, PAGE, KFILES_LIMIT, 
      STORAGEPLACE, KFILES_NUM, MIJI, 
      MULU, REMARK, REALSTORAGE_ID, 
      IFEXIST, COPY, JIESHOUREN_INPUT, 
      BUMEN_INPUT, YIJIAOREN_INPUT, YJBUMEN_INPUT, 
      JIESHOU_TIME, YIJIAO_TIME, TYPE_ID
      )
    values (#{kfilesId,jdbcType=INTEGER}, #{prjId,jdbcType=INTEGER}, #{prjNameInput,jdbcType=NVARCHAR}, 
      #{cequname,jdbcType=NVARCHAR}, #{le,jdbcType=INTEGER}, #{kfilesBoxNum,jdbcType=NVARCHAR}, 
      #{kfilesBoxName,jdbcType=NVARCHAR}, #{createtime,jdbcType=TIMESTAMP}, #{lft,jdbcType=INTEGER}, 
      #{rt,jdbcType=INTEGER}, #{page,jdbcType=INTEGER}, #{kfilesLimit,jdbcType=NVARCHAR}, 
      #{storageplace,jdbcType=NVARCHAR}, #{kfilesNum,jdbcType=NVARCHAR}, #{miji,jdbcType=NVARCHAR}, 
      #{mulu,jdbcType=NVARCHAR}, #{remark,jdbcType=NVARCHAR}, #{realstorageId,jdbcType=INTEGER}, 
      #{ifexist,jdbcType=BIT}, #{copy,jdbcType=NVARCHAR}, #{jieshourenInput,jdbcType=NVARCHAR}, 
      #{bumenInput,jdbcType=NVARCHAR}, #{yijiaorenInput,jdbcType=NVARCHAR}, #{yjbumenInput,jdbcType=NVARCHAR}, 
      #{jieshouTime,jdbcType=TIMESTAMP}, #{yijiaoTime,jdbcType=TIMESTAMP}, #{typeId,jdbcType=INTEGER}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.fh.entity.amsmodel.KmsFiles">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 23 15:20:15 CST 2017.
    -->
    insert into kms_files
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="kfilesId != null">
        KFILES_ID,
      </if>
      <if test="prjId != null">
        PRJ_ID,
      </if>
      <if test="prjNameInput != null">
        PRJ_NAME_INPUT,
      </if>
      <if test="cequname != null">
        CEQUNAME,
      </if>
      <if test="le != null">
        LE,
      </if>
      <if test="kfilesBoxNum != null">
        KFILES_BOX_NUM,
      </if>
      <if test="kfilesBoxName != null">
        KFILES_BOX_NAME,
      </if>
      <if test="createtime != null">
        CREATETIME,
      </if>
      <if test="lft != null">
        LFT,
      </if>
      <if test="rt != null">
        RT,
      </if>
      <if test="page != null">
        PAGE,
      </if>
      <if test="kfilesLimit != null">
        KFILES_LIMIT,
      </if>
      <if test="storageplace != null">
        STORAGEPLACE,
      </if>
      <if test="kfilesNum != null">
        KFILES_NUM,
      </if>
      <if test="miji != null">
        MIJI,
      </if>
      <if test="mulu != null">
        MULU,
      </if>
      <if test="remark != null">
        REMARK,
      </if>
      <if test="realstorageId != null">
        REALSTORAGE_ID,
      </if>
      <if test="ifexist != null">
        IFEXIST,
      </if>
      <if test="copy != null">
        COPY,
      </if>
      <if test="jieshourenInput != null">
        JIESHOUREN_INPUT,
      </if>
      <if test="bumenInput != null">
        BUMEN_INPUT,
      </if>
      <if test="yijiaorenInput != null">
        YIJIAOREN_INPUT,
      </if>
      <if test="yjbumenInput != null">
        YJBUMEN_INPUT,
      </if>
      <if test="jieshouTime != null">
        JIESHOU_TIME,
      </if>
      <if test="yijiaoTime != null">
        YIJIAO_TIME,
      </if>
      <if test="typeId != null">
        TYPE_ID,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="kfilesId != null">
        #{kfilesId,jdbcType=INTEGER},
      </if>
      <if test="prjId != null">
        #{prjId,jdbcType=INTEGER},
      </if>
      <if test="prjNameInput != null">
        #{prjNameInput,jdbcType=NVARCHAR},
      </if>
      <if test="cequname != null">
        #{cequname,jdbcType=NVARCHAR},
      </if>
      <if test="le != null">
        #{le,jdbcType=INTEGER},
      </if>
      <if test="kfilesBoxNum != null">
        #{kfilesBoxNum,jdbcType=NVARCHAR},
      </if>
      <if test="kfilesBoxName != null">
        #{kfilesBoxName,jdbcType=NVARCHAR},
      </if>
      <if test="createtime != null">
        #{createtime,jdbcType=TIMESTAMP},
      </if>
      <if test="lft != null">
        #{lft,jdbcType=INTEGER},
      </if>
      <if test="rt != null">
        #{rt,jdbcType=INTEGER},
      </if>
      <if test="page != null">
        #{page,jdbcType=INTEGER},
      </if>
      <if test="kfilesLimit != null">
        #{kfilesLimit,jdbcType=NVARCHAR},
      </if>
      <if test="storageplace != null">
        #{storageplace,jdbcType=NVARCHAR},
      </if>
      <if test="kfilesNum != null">
        #{kfilesNum,jdbcType=NVARCHAR},
      </if>
      <if test="miji != null">
        #{miji,jdbcType=NVARCHAR},
      </if>
      <if test="mulu != null">
        #{mulu,jdbcType=NVARCHAR},
      </if>
      <if test="remark != null">
        #{remark,jdbcType=NVARCHAR},
      </if>
      <if test="realstorageId != null">
        #{realstorageId,jdbcType=INTEGER},
      </if>
      <if test="ifexist != null">
        #{ifexist,jdbcType=BIT},
      </if>
      <if test="copy != null">
        #{copy,jdbcType=NVARCHAR},
      </if>
      <if test="jieshourenInput != null">
        #{jieshourenInput,jdbcType=NVARCHAR},
      </if>
      <if test="bumenInput != null">
        #{bumenInput,jdbcType=NVARCHAR},
      </if>
      <if test="yijiaorenInput != null">
        #{yijiaorenInput,jdbcType=NVARCHAR},
      </if>
      <if test="yjbumenInput != null">
        #{yjbumenInput,jdbcType=NVARCHAR},
      </if>
      <if test="jieshouTime != null">
        #{jieshouTime,jdbcType=TIMESTAMP},
      </if>
      <if test="yijiaoTime != null">
        #{yijiaoTime,jdbcType=TIMESTAMP},
      </if>
      <if test="typeId != null">
        #{typeId,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.fh.entity.amsmodel.KmsFiles">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 23 15:20:15 CST 2017.
    -->
    update kms_files
    <set>
      <if test="prjId != null">
        PRJ_ID = #{prjId,jdbcType=INTEGER},
      </if>
      <if test="prjNameInput != null">
        PRJ_NAME_INPUT = #{prjNameInput,jdbcType=NVARCHAR},
      </if>
      <if test="cequname != null">
        CEQUNAME = #{cequname,jdbcType=NVARCHAR},
      </if>
      <if test="le != null">
        LE = #{le,jdbcType=INTEGER},
      </if>
      <if test="kfilesBoxNum != null">
        KFILES_BOX_NUM = #{kfilesBoxNum,jdbcType=NVARCHAR},
      </if>
      <if test="kfilesBoxName != null">
        KFILES_BOX_NAME = #{kfilesBoxName,jdbcType=NVARCHAR},
      </if>
      <if test="createtime != null">
        CREATETIME = #{createtime,jdbcType=TIMESTAMP},
      </if>
      <if test="lft != null">
        LFT = #{lft,jdbcType=INTEGER},
      </if>
      <if test="rt != null">
        RT = #{rt,jdbcType=INTEGER},
      </if>
      <if test="page != null">
        PAGE = #{page,jdbcType=INTEGER},
      </if>
      <if test="kfilesLimit != null">
        KFILES_LIMIT = #{kfilesLimit,jdbcType=NVARCHAR},
      </if>
      <if test="storageplace != null">
        STORAGEPLACE = #{storageplace,jdbcType=NVARCHAR},
      </if>
      <if test="kfilesNum != null">
        KFILES_NUM = #{kfilesNum,jdbcType=NVARCHAR},
      </if>
      <if test="miji != null">
        MIJI = #{miji,jdbcType=NVARCHAR},
      </if>
      <if test="mulu != null">
        MULU = #{mulu,jdbcType=NVARCHAR},
      </if>
      <if test="remark != null">
        REMARK = #{remark,jdbcType=NVARCHAR},
      </if>
      <if test="realstorageId != null">
        REALSTORAGE_ID = #{realstorageId,jdbcType=INTEGER},
      </if>
      <if test="ifexist != null">
        IFEXIST = #{ifexist,jdbcType=BIT},
      </if>
      <if test="copy != null">
        COPY = #{copy,jdbcType=NVARCHAR},
      </if>
      <if test="jieshourenInput != null">
        JIESHOUREN_INPUT = #{jieshourenInput,jdbcType=NVARCHAR},
      </if>
      <if test="bumenInput != null">
        BUMEN_INPUT = #{bumenInput,jdbcType=NVARCHAR},
      </if>
      <if test="yijiaorenInput != null">
        YIJIAOREN_INPUT = #{yijiaorenInput,jdbcType=NVARCHAR},
      </if>
      <if test="yjbumenInput != null">
        YJBUMEN_INPUT = #{yjbumenInput,jdbcType=NVARCHAR},
      </if>
      <if test="jieshouTime != null">
        JIESHOU_TIME = #{jieshouTime,jdbcType=TIMESTAMP},
      </if>
      <if test="yijiaoTime != null">
        YIJIAO_TIME = #{yijiaoTime,jdbcType=TIMESTAMP},
      </if>
      <if test="typeId != null">
        TYPE_ID = #{typeId,jdbcType=INTEGER},
      </if>
    </set>
    where KFILES_ID = #{kfilesId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.fh.entity.amsmodel.KmsFiles">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 23 15:20:15 CST 2017.
    -->
    update kms_files
    set PRJ_ID = #{prjId,jdbcType=INTEGER},
      PRJ_NAME_INPUT = #{prjNameInput,jdbcType=NVARCHAR},
      CEQUNAME = #{cequname,jdbcType=NVARCHAR},
      LE = #{le,jdbcType=INTEGER},
      KFILES_BOX_NUM = #{kfilesBoxNum,jdbcType=NVARCHAR},
      KFILES_BOX_NAME = #{kfilesBoxName,jdbcType=NVARCHAR},
      CREATETIME = #{createtime,jdbcType=TIMESTAMP},
      LFT = #{lft,jdbcType=INTEGER},
      RT = #{rt,jdbcType=INTEGER},
      PAGE = #{page,jdbcType=INTEGER},
      KFILES_LIMIT = #{kfilesLimit,jdbcType=NVARCHAR},
      STORAGEPLACE = #{storageplace,jdbcType=NVARCHAR},
      KFILES_NUM = #{kfilesNum,jdbcType=NVARCHAR},
      MIJI = #{miji,jdbcType=NVARCHAR},
      MULU = #{mulu,jdbcType=NVARCHAR},
      REMARK = #{remark,jdbcType=NVARCHAR},
      REALSTORAGE_ID = #{realstorageId,jdbcType=INTEGER},
      IFEXIST = #{ifexist,jdbcType=BIT},
      COPY = #{copy,jdbcType=NVARCHAR},
      JIESHOUREN_INPUT = #{jieshourenInput,jdbcType=NVARCHAR},
      BUMEN_INPUT = #{bumenInput,jdbcType=NVARCHAR},
      YIJIAOREN_INPUT = #{yijiaorenInput,jdbcType=NVARCHAR},
      YJBUMEN_INPUT = #{yjbumenInput,jdbcType=NVARCHAR},
      JIESHOU_TIME = #{jieshouTime,jdbcType=TIMESTAMP},
      YIJIAO_TIME = #{yijiaoTime,jdbcType=TIMESTAMP},
      TYPE_ID = #{typeId,jdbcType=INTEGER}
    where KFILES_ID = #{kfilesId,jdbcType=INTEGER}
  </update>
  
  
  <!--表名 -->
	<sql id="tableName">
		KMS_FILES
	</sql>


	<!-- 字段 -->
	<sql id="Field">
    KFILES_ID, PRJ_ID, PRJ_NAME_INPUT, CEQUNAME, LE, KFILES_BOX_NUM, KFILES_BOX_NAME, 
    CREATETIME, LFT, RT, PAGE, KFILES_LIMIT, STORAGEPLACE, KFILES_NUM, MIJI, MULU, REMARK, 
    REALSTORAGE_ID, IFEXIST, COPY, JIESHOUREN_INPUT, BUMEN_INPUT, YIJIAOREN_INPUT, YJBUMEN_INPUT, 
    JIESHOU_TIME, YIJIAO_TIME, TYPE_ID
	</sql>


	
	<!-- 所有数据的列表 -->
	<select id="datalistPage" parameterType="page" resultType="pd">
		select
		<include refid="Field" />
		from
		<include refid="tableName" />
		where 1=1
		<if test="pd.KMSFILES_ID!= null and pd.KMSFILES_ID != ''"><!-- 检索 -->
		and LE = #{pd.KMSFILES_ID}
		</if>
	</select>
	
	<!-- 通过ID获取数据 -->
	<select id="findById" parameterType="pd" resultType="pd">
		select 
		<include refid="Field"></include>
		from 
		<include refid="tableName"></include>
		where 
			KFILES_ID = #{KFILES_ID}
	</select>
	
	<!-- 通过le获取项目列表 -->
	<select id="listSubKmsFilesByLe" parameterType="pd" resultType="pd">
		SELECT * FROM(
		SELECT 
			(CASE WHEN 7 >= LE THEN '1' 
			WHEN LE > 7 THEN '0' 
			ELSE LE END ) as isParent,
		<include refid="Field"></include>
		FROM
		<include refid="tableName"></include>
		WHERE
			LE = #{LE} ) allfiles  WHERE isParent =1
	</select>
	

 	<!-- 通过le获取其子级列表 -->
	<select id="listByKmsFiles" parameterType="KmsFiles" resultMap="BaseResultMap">
	SELECT * FROM(
		SELECT 
			(CASE WHEN 7 >= LE THEN '1' 
			WHEN LE > 7 THEN '0' 
			ELSE LE END ) as isParent,
		<include refid="Field"></include>
		FROM
		<include refid="tableName"></include>
		WHERE
			LE = #{le} ORDER BY KFILES_ID
	  
      <if test="kfilesId == null">
	 	and KFILES_ID is null
	  </if>
	  <if test="kfilesId != null">
        and KFILES_ID = #{kfilesId,jdbcType=INTEGER}
      </if>
	  <if test="prjId != null">
        and PRJ_ID = #{prjId,jdbcType=INTEGER}
      </if>
      <if test="prjNameInput != null">
        and PRJ_NAME_INPUT = #{prjNameInput,jdbcType=NVARCHAR}
      </if>
      <if test="cequname != null">
        CEQUNAME = #{cequname,jdbcType=NVARCHAR}
      </if>
      <if test="le != null">
        LE = #{le,jdbcType=INTEGER}
      </if>
      <if test="kfilesBoxNum != null">
        KFILES_BOX_NUM = #{kfilesBoxNum,jdbcType=NVARCHAR}
      </if>
      <if test="kfilesBoxName != null">
        KFILES_BOX_NAME = #{kfilesBoxName,jdbcType=NVARCHAR}
      </if>
      <if test="createtime != null">
        CREATETIME = #{createtime,jdbcType=TIMESTAMP}
      </if>
      <if test="lft != null">
        LFT = #{lft,jdbcType=INTEGER}
      </if>
      <if test="rt != null">
        RT = #{rt,jdbcType=INTEGER}
      </if>
      <if test="page != null">
        PAGE = #{page,jdbcType=INTEGER}
      </if>
      <if test="kfilesLimit != null">
        KFILES_LIMIT = #{kfilesLimit,jdbcType=NVARCHAR}
      </if>
      <if test="storageplace != null">
        STORAGEPLACE = #{storageplace,jdbcType=NVARCHAR}
      </if>
      <if test="kfilesNum != null">
        KFILES_NUM = #{kfilesNum,jdbcType=NVARCHAR}
      </if>
      <if test="miji != null">
        MIJI = #{miji,jdbcType=NVARCHAR}
      </if>
      <if test="mulu != null">
        MULU = #{mulu,jdbcType=NVARCHAR}
      </if>
      <if test="remark != null">
        REMARK = #{remark,jdbcType=NVARCHAR},
      </if>
      <if test="realstorageId != null">
        REALSTORAGE_ID = #{realstorageId,jdbcType=INTEGER},
      </if>
      <if test="ifexist != null">
        IFEXIST = #{ifexist,jdbcType=BIT},
      </if>
      <if test="copy != null">
        COPY = #{copy,jdbcType=NVARCHAR},
      </if>
      <if test="jieshourenInput != null">
        JIESHOUREN_INPUT = #{jieshourenInput,jdbcType=NVARCHAR},
      </if>
      <if test="bumenInput != null">
        BUMEN_INPUT = #{bumenInput,jdbcType=NVARCHAR},
      </if>
      <if test="yijiaorenInput != null">
        YIJIAOREN_INPUT = #{yijiaorenInput,jdbcType=NVARCHAR},
      </if>
      <if test="yjbumenInput != null">
        YJBUMEN_INPUT = #{yjbumenInput,jdbcType=NVARCHAR},
      </if>
      <if test="jieshouTime != null">
        JIESHOU_TIME = #{jieshouTime,jdbcType=TIMESTAMP},
      </if>
      <if test="yijiaoTime != null">
        YIJIAO_TIME = #{yijiaoTime,jdbcType=TIMESTAMP},
      </if>
      <if test="typeId != null">
        TYPE_ID = #{typeId,jdbcType=INTEGER},
      </if>
		)allfiles  WHERE isparent =1
	</select>
	
	

	
	
</mapper>