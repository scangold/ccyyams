<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="FmsPZDocVolumeMapper">
  <resultMap id="BaseResultMap" type="FmsPZDocVolume">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 31 16:05:40 CST 2017.
    -->
    <id column="AC_VOLUME_ID" jdbcType="CHAR" property="acVolumeId" />
    <result column="AC_BOX_ID" jdbcType="CHAR" property="acBoxId" />
    <result column="ACDOC_VOLUME" jdbcType="INTEGER" property="acdocVolume" />
    <result column="ACDOC_REMARK" jdbcType="NVARCHAR" property="acdocRemark" />
    <result column="ACDOC_STARTDAY" jdbcType="TIMESTAMP" property="acdocStartday" />
    <result column="ACDOC_ENDDAY" jdbcType="TIMESTAMP" property="acdocEndday" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 31 16:05:40 CST 2017.
    -->
    AC_VOLUME_ID, AC_BOX_ID, ACDOC_VOLUME, ACDOC_REMARK, ACDOC_STARTDAY, ACDOC_ENDDAY
  </sql>
  
   <select id="deletelistpage" parameterType="pd" resultType="pd">
select  b.ac_box_id,a.ac_volume_id,c.acdoc_id,b.acdoc_box,a.acdoc_volume,c.acdoc_num,c.acdoc_year,c.acdoc_month,b.acdoc_room,b.acdoc_case,c.acdoc_valid,c.destroied,c.destroy_how,c.destroy_check,c.acdoc_remark,b.user_id
from  fms_pzdocvolume a,fms_pzdocbox  b,fms_pzdoc c
where destroied = 1 and a.ac_box_id = b.ac_box_id and a.ac_volume_id = c.ac_volume_id
  </select>
  
  <insert id="insertpzdocvolume" parameterType="pd">
    insert into fms_pzdocvolume (ac_volume_id, ac_box_id, acdoc_volume, 
      acdoc_remark, acdoc_startday, acdoc_endday
      )
    values (#{ac_volume_id,jdbcType=CHAR}, #{ac_box_id,jdbcType=CHAR}, #{acdoc_volume,jdbcType=INTEGER}, 
      #{acdoc_remark,jdbcType=NVARCHAR}, #{acdoc_startday,jdbcType=TIMESTAMP}, #{acdoc_endday,jdbcType=TIMESTAMP}
      )
  </insert>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultType="pd">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 31 16:05:40 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from fms_pzdocvolume
    where AC_VOLUME_ID = #{acVolumeId,jdbcType=CHAR}
  </select>
   <select id="pzlistid" parameterType="pd" resultType="pd">
SELECT fms_pzdocvolume.ac_volume_id FROM fms_pzdocvolume
WHERE 1=1
   </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 31 16:05:40 CST 2017.
    -->
    delete from fms_pzdocvolume
    where AC_VOLUME_ID = #{acVolumeId,jdbcType=CHAR}
  </delete>
  <insert id="insert" parameterType="FmsPZDocVolume">
    insert into fms_pzdocvolume (AC_VOLUME_ID, AC_BOX_ID, ACDOC_VOLUME, 
      ACDOC_REMARK, ACDOC_STARTDAY, ACDOC_ENDDAY
      )
    values (#{acVolumeId,jdbcType=CHAR}, #{acBoxId,jdbcType=CHAR}, #{acdocVolume,jdbcType=INTEGER}, 
      #{acdocRemark,jdbcType=NVARCHAR}, #{acdocStartday,jdbcType=TIMESTAMP}, #{acdocEndday,jdbcType=TIMESTAMP}
      )
  </insert>
  <insert id="insertSelective" parameterType="FmsPZDocVolume">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 31 16:05:40 CST 2017.
    -->
    insert into fms_pzdocvolume
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="acVolumeId != null">
        AC_VOLUME_ID,
      </if>
      <if test="acBoxId != null">
        AC_BOX_ID,
      </if>
      <if test="acdocVolume != null">
        ACDOC_VOLUME,
      </if>
      <if test="acdocRemark != null">
        ACDOC_REMARK,
      </if>
      <if test="acdocStartday != null">
        ACDOC_STARTDAY,
      </if>
      <if test="acdocEndday != null">
        ACDOC_ENDDAY,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="acVolumeId != null">
        #{acVolumeId,jdbcType=CHAR},
      </if>
      <if test="acBoxId != null">
        #{acBoxId,jdbcType=CHAR},
      </if>
      <if test="acdocVolume != null">
        #{acdocVolume,jdbcType=INTEGER},
      </if>
      <if test="acdocRemark != null">
        #{acdocRemark,jdbcType=NVARCHAR},
      </if>
      <if test="acdocStartday != null">
        #{acdocStartday,jdbcType=TIMESTAMP},
      </if>
      <if test="acdocEndday != null">
        #{acdocEndday,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="FmsPZDocVolume">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 31 16:05:40 CST 2017.
    -->
    update fms_pzdocvolume
    <set>
      <if test="acBoxId != null">
        AC_BOX_ID = #{acBoxId,jdbcType=CHAR},
      </if>
      <if test="acdocVolume != null">
        ACDOC_VOLUME = #{acdocVolume,jdbcType=INTEGER},
      </if>
      <if test="acdocRemark != null">
        ACDOC_REMARK = #{acdocRemark,jdbcType=NVARCHAR},
      </if>
      <if test="acdocStartday != null">
        ACDOC_STARTDAY = #{acdocStartday,jdbcType=TIMESTAMP},
      </if>
      <if test="acdocEndday != null">
        ACDOC_ENDDAY = #{acdocEndday,jdbcType=TIMESTAMP},
      </if>
    </set>
    where AC_VOLUME_ID = #{acVolumeId,jdbcType=CHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="FmsPZDocVolume">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 31 16:05:40 CST 2017.
    -->
    update fms_pzdocvolume
    set AC_BOX_ID = #{acBoxId,jdbcType=CHAR},
      ACDOC_VOLUME = #{acdocVolume,jdbcType=INTEGER},
      ACDOC_REMARK = #{acdocRemark,jdbcType=NVARCHAR},
      ACDOC_STARTDAY = #{acdocStartday,jdbcType=TIMESTAMP},
      ACDOC_ENDDAY = #{acdocEndday,jdbcType=TIMESTAMP}
    where AC_VOLUME_ID = #{acVolumeId,jdbcType=CHAR}
  </update>
    <select id="pzlistPage" parameterType="pd" resultType="pd">
select  b.ac_box_id,a.ac_volume_id,c.acdoc_id,b.acdoc_box,a.acdoc_volume,c.acdoc_num,c.acdoc_year,c.acdoc_month,b.acdoc_room,b.acdoc_case,c.acdoc_valid,c.destroied,c.acdoc_remark,b.user_id
from  fms_pzdocvolume a
inner join fms_pzdocbox  b on a.ac_box_id = b.ac_box_id
inner join fms_pzdoc c  on a.ac_volume_id = c.ac_volume_id
where destroied = 0
		<if test="pd.keywords!= null and pd.keywords != ''"><!-- 关键词检索 -->
			and
			(
			c.acdoc_num LIKE CONCAT(CONCAT('%', #{pd.keywords}),'%')
			or
			b.acdoc_box LIKE CONCAT(CONCAT('%', #{pd.keywords}),'%')
			or
			a.acdoc_volume LIKE CONCAT(CONCAT('%', #{pd.keywords}),'%')
			or
			b.acdoc_case LIKE CONCAT(CONCAT('%', #{pd.keywords}),'%')
			or
			b.acdoc_room LIKE CONCAT(CONCAT('%', #{pd.keywords}),'%')
			or
			c.acdoc_valid LIKE CONCAT(CONCAT('%', #{pd.keywords}),'%')
			)
		</if>
		<if test="pd.acdoc_year !=null and pd.acdoc_year !=''"><!-- 年份检索 -->
			and c.acdoc_year = #{pd.acdoc_year}
		</if>
		<if test="pd.acdoc_month != null and pd.acdoc_month != ''"><!-- 月份检索 -->
			and c.acdoc_month=#{pd.acdoc_month}
		</if>
		<if test="pd.acdoc_box != null and pd.acdoc_box != ''"><!-- 盒号检索 -->
			and b.acdoc_box=#{pd.acdoc_box}
		</if>
		<if test="pd.acdoc_volume != null and pd.acdoc_volume != ''"><!-- 册号检索 -->
			and a.acdoc_volume=#{pd.acdoc_volume}
		</if>
  </select>
  <select id="getyear" parameterType="pd" resultType="pd">
  SELECT DISTINCT fms_pzdoc.acdoc_year
FROM fms_pzdoc
where 1=1
  </select>
   <select id="getmonth" parameterType="pd" resultType="pd">
  SELECT DISTINCT fms_pzdoc.acdoc_month
FROM fms_pzdoc 
where 1=1
  </select>
     <select id="getbox" parameterType="pd" resultType="pd">
  SELECT fms_pzdocbox.acdoc_box,fms_pzdocbox.ac_box_id
FROM fms_pzdocbox  
where 1=1

  </select>
     <select id="getvolume" parameterType="pd" resultType="pd">
  SELECT fms_pzdocvolume.acdoc_volume,fms_pzdocvolume.ac_volume_id
FROM fms_pzdocvolume 
where 1=1
  </select>
   <update id="updateByPzdocvolume" parameterType="pd">
    update fms_pzdocvolume
    set  ac_box_id = #{ac_box_id,jdbcType=CHAR}
    where acdoc_volume = #{acdoc_volume,jdbcType=CHAR}
  </update>
</mapper>