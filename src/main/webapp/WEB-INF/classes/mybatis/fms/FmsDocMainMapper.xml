<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="FmsDocMainMapper">
	<resultMap id="BaseResultMap" type="FmsDocMain">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Aug 24 
			11:10:45 CST 2017. -->
		<id column="ID" jdbcType="CHAR" property="id" />
		<result column="fms_ID" jdbcType="CHAR" property="fmsId" />
		<result column="USER_ID" jdbcType="CHAR" property="userId" />
		<result column="TITLE" jdbcType="NVARCHAR" property="title" />
		<result column="KEYWORD" jdbcType="NVARCHAR" property="keyword" />
		<result column="PRECISE" jdbcType="NVARCHAR" property="precise" />
		<result column="CLASSTYPE" jdbcType="NVARCHAR" property="classtype" />
		<result column="OWNER" jdbcType="NVARCHAR" property="owner" />
		<result column="SUBOWNER" jdbcType="NVARCHAR" property="subowner" />
		<result column="DOCNUM" jdbcType="NVARCHAR" property="docnum" />
		<result column="SEQUENCENUM" jdbcType="NVARCHAR" property="sequencenum" />
		<result column="PS" jdbcType="NVARCHAR" property="ps" />
		<result column="DOCLEVEL" jdbcType="NVARCHAR" property="doclevel" />
		<result column="CREATETIME" jdbcType="TIMESTAMP" property="createtime" />
		<result column="SFNUMBER" jdbcType="NVARCHAR" property="sfnumber" />
		<result column="SFTIIME" jdbcType="TIMESTAMP" property="sftiime" />
		<result column="SUMNUMBER" jdbcType="NVARCHAR" property="sumnumber" />
		<result column="FILEYEAR" jdbcType="NVARCHAR" property="fileyear" />
		<result column="VALIDPERIOD" jdbcType="INTEGER" property="validperiod" />
		<result column="SECRETLEVEL" jdbcType="NVARCHAR" property="secretlevel" />
		<result column="PAGES" jdbcType="INTEGER" property="pages" />
		<result column="SUBCOPIES" jdbcType="INTEGER" property="subcopies" />
		<result column="ISVALID" jdbcType="NUMERIC" property="isvalid" />
		<result column="Superordinateclass" jdbcType="NVARCHAR"
			property="superordinateclass" />
		<result column="SubordinateCLASS" jdbcType="NVARCHAR" property="subordinateclass" />
		<result column="Medianclass" jdbcType="NVARCHAR" property="medianclass" />
		<result column="spec" jdbcType="NVARCHAR" property="spec" />
		<result column="carrier" jdbcType="NVARCHAR" property="carrier" />
		<result column="pagination" jdbcType="INTEGER" property="pagination" />
		<result column="docid" jdbcType="NVARCHAR" property="docid" />
	</resultMap>

	<resultMap id="Base" type="FmsDocMain">
	<id column="ID" jdbcType="CHAR" property="id" />
		<result column="fms_ID" jdbcType="CHAR" property="fmsId" />
		<result column="USER_ID" jdbcType="CHAR" property="userId" />
		<result column="TITLE" jdbcType="NVARCHAR" property="title" />
		<result column="KEYWORD" jdbcType="NVARCHAR" property="keyword" />
		<result column="PRECISE" jdbcType="NVARCHAR" property="precise" />
		<result column="CLASSTYPE" jdbcType="NVARCHAR" property="classtype" />
		<result column="OWNER" jdbcType="NVARCHAR" property="owner" />
		<result column="SUBOWNER" jdbcType="NVARCHAR" property="subowner" />
		<result column="DOCNUM" jdbcType="NVARCHAR" property="docnum" />
		<result column="SEQUENCENUM" jdbcType="NVARCHAR" property="sequencenum" />
		<result column="PS" jdbcType="NVARCHAR" property="ps" />
		<result column="DOCLEVEL" jdbcType="NVARCHAR" property="doclevel" />
		<result column="CREATETIME" jdbcType="TIMESTAMP" property="createtime" />
		<result column="SFNUMBER" jdbcType="NVARCHAR" property="sfnumber" />
		<result column="SFTIIME" jdbcType="TIMESTAMP" property="sftiime" />
		<result column="SUMNUMBER" jdbcType="NVARCHAR" property="sumnumber" />
		<result column="FILEYEAR" jdbcType="NVARCHAR" property="fileyear" />
		<result column="VALIDPERIOD" jdbcType="INTEGER" property="validperiod" />
		<result column="SECRETLEVEL" jdbcType="NVARCHAR" property="secretlevel" />
		<result column="PAGES" jdbcType="INTEGER" property="pages" />
		<result column="SUBCOPIES" jdbcType="INTEGER" property="subcopies" />
		<result column="ISVALID" jdbcType="NUMERIC" property="isvalid" />
		<result column="Superordinateclass" jdbcType="NVARCHAR"
			property="superordinateclass" />
		<result column="SubordinateCLASS" jdbcType="NVARCHAR" property="subordinateclass" />
		<result column="Medianclass" jdbcType="NVARCHAR" property="medianclass" />
		<result column="spec" jdbcType="NVARCHAR" property="spec" />
		<result column="carrier" jdbcType="NVARCHAR" property="carrier" />
		<result column="pagination" jdbcType="INTEGER" property="pagination" />
		<result column="docid" jdbcType="NVARCHAR" property="docid" />
		<association column="fms_ID" property="fmsDocBox"
			javaType="FmsDocBox" select="FmsDocBoxMapper.selectByPrimaryKey"></association>
		<association column="USER_ID" property="user" javaType="User"
			select="UserMapper.selectByPrimaryKey"></association>
		<association column="OWNER" property="ownerDepartment"
			javaType="Department" select="DepartmentMapper.findMapById"></association>
		<association column="SUBOWNER" property="subownerDepartment"
			javaType="Department" select="DepartmentMapper.findMapById"></association>
		<!-- <association column="DOCLEVEL" property="doclevelFmsDataDictItem"
			javaType="FmsDataDictItem" select="FmsDataDictItemMapper.selectByPrimaryKey"></association>
		<association column="CLASSTYPE,CLASSTYPE" property="classtypeFmsDataDictItem"
			javaType="FmsDataDictItem" select="FmsDataDictItemMapper.selectByPrimaryKey"></association>
		<association column="SECRETLEVEL,CLASSTYPE" property="secretlevelFmsDataDictItem"
			javaType="FmsDataDictItem" select="FmsDataDictItemMapper.selectByPrimaryKey"></association>
		<association column="Superordinateclass,CLASSTYPE" property="superordinateclassFmsDataDictItem"
			javaType="FmsDataDictItem" select="FmsDataDictItemMapper.selectByPrimaryKey"></association>
		<association column="SubordinateCLASS,CLASSTYPE" property="subordinateclassFmsDataDictItem"
			javaType="FmsDataDictItem" select="FmsDataDictItemMapper.selectByPrimaryKey"></association>
		<association column="Medianclass,CLASSTYPE" property="medianclassFmsDataDictItem"
			javaType="FmsDataDictItem" select="FmsDataDictItemMapper.selectByPrimaryKey"></association>
		<association column="spec" property="specFmsDataDictItem"
			javaType="FmsDataDictItem" select="FmsDataDictItemMapper.selectByPrimaryKey"></association>
		<association column="carrier" property="carrierDataDictItem"
			javaType="FmsDataDictItem" select="FmsDataDictItemMapper.selectByPrimaryKey"></association>
		<association column="SUMNUMBER" property="sumnumberFmsDataDictItem"
			javaType="FmsDataDictItem" select="FmsDataDictItemMapper.selectByPrimaryKey"></association> -->
		<collection property="fmsAddFiles" column="ID" javaType="ArrayList"
			select="FmsAddFileMapper.selectByForeignKey" ofType="FmsAddFile"></collection>
	</resultMap>

	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Aug 24 
			11:10:45 CST 2017. -->
		ID, fms_ID, USER_ID, TITLE, KEYWORD, PRECISE, CLASSTYPE, OWNER,
		SUBOWNER, DOCNUM,
		SEQUENCENUM, PS, DOCLEVEL, CREATETIME, SFNUMBER,
		SFTIIME, SUMNUMBER, FILEYEAR,
		VALIDPERIOD,
		SECRETLEVEL, PAGES,
		SUBCOPIES, ISVALID, Superordinateclass, SubordinateCLASS,
		Medianclass,
		spec, carrier, "pagination", docid
	</sql>
	<select id="selectByPrimaryKey" parameterType="java.lang.String"
		resultMap="Base">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Aug 24 
			11:10:45 CST 2017. -->
		select
		<include refid="Base_Column_List" />
		from fms_docmain
		where ID = #{id,jdbcType=CHAR}
	</select>
	
	<select id="selectByBorrowPrimaryKey" parameterType="java.lang.String"
		resultMap="Base">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Aug 24 
			11:10:45 CST 2017. -->
			
			SELECT b.* from fms_borrowcontent a, fms_docmain b where a.ID =b.ID and a.fms_ID=#{id,jdbcType=CHAR}
		
	</select>
	<select id="selectByCount" resultType="java.lang.Long">
		SELECT COUNT(1) from
		fms_docmain
	</select>
	<select id="findDocByIds" resultType="pd" parameterType="String">
		SELECT 
		<include refid="Base_Column_List" />
		 from
		fms_docmain
		where id
		 in
		<foreach item="item" index="index" collection="array" open="("
			separator="," close=")">
			#{item}
		</foreach>
	</select>
	<!-- 用户列表 -->
	<select id="listPage" parameterType="page" resultType="pd">
		select
		<include refid="Base_Column_List" />
		from fms_docmain u
		where 1=1
		<if test="pd.keywords!= null and pd.keywords != ''"><!-- 关键词检索 -->
			and
			(
			u.TITLE LIKE CONCAT(CONCAT('%', #{pd.keywords}),'%')
			or
			u.KEYWORD
			LIKE CONCAT(CONCAT('%', #{pd.keywords}),'%')
			or
			u.PRECISE LIKE
			CONCAT(CONCAT('%', #{pd.keywords}),'%')
			)
		</if>
		<if test="pd.isvalid!= null and pd.isvalid != ''"><!-- 关键词检索 -->
			and  u.ISVALID= #{pd.isvalid,jdbcType=NUMERIC}			
		</if>
		<if test="pd.fmsid!= null and pd.fmsid != ''"><!-- 关键词检索 -->
			and  u.fms_id= #{pd.fmsid,jdbcType=NUMERIC}			
		</if>

		<if test="pd.userId != null and pd.userId != ''">

			and USER_ID = #{pd.userId,jdbcType=CHAR}
		</if>
		<if test="pd.title != null and pd.title != ''">
			and TITLE = #{pd.title,jdbcType=NVARCHAR}
		</if>
		<if test="pd.keyword != null and pd.keyword != ''">
			and KEYWORD = #{pd.keyword,jdbcType=NVARCHAR}
		</if>
		<if test="pd.precise != null and pd.precise != ''">
			and PRECISE = #{pd.precise,jdbcType=NVARCHAR}
		</if>
		<if test="pd.classtype != null and  pd.classtype != ''">
			and CLASSTYPE = #{pd.classtype,jdbcType=NVARCHAR}
		</if>
		<if test="pd.owner != null and pd.owner != ''">
			and OWNER = #{pd.owner,jdbcType=NVARCHAR}
		</if>
		<if test="pd.subowner != null and pd.subowner != ''">
			and SUBOWNER = #{pd.subowner,jdbcType=NVARCHAR}
		</if>
		<if test="pd.docnum != null and pd.docnum != ''">
			and DOCNUM = #{pd.docnum,jdbcType=NVARCHAR}
		</if>
		<if test="pd.sequencenum != null and pd.sequencenum != ''">
			and SEQUENCENUM = #{pd.sequencenum,jdbcType=NVARCHAR}
		</if>
		<if test="pd.ps != null and  pd.ps != ''">
			and PS = #{pd.ps,jdbcType=NVARCHAR}
		</if>
		<if test="pd.doclevel != null and pd.doclevel != ''">
			and DOCLEVEL = #{pd.doclevel,jdbcType=NVARCHAR}
		</if>
		<if test="pd.createtime != null and pd.createtime != ''">
			and CREATETIME = #{pd.createtime,jdbcType=TIMESTAMP}
		</if>
		<if test="pd.sfnumber != null and pd.sfnumber != ''">
			and SFNUMBER = #{pd.sfnumber,jdbcType=NVARCHAR}
		</if>
		<if test="pd.sftiime != null and  pd.sftiime != '' ">
			and SFTIIME = #{pd.sftiime,jdbcType=TIMESTAMP}
		</if>
		<if test="pd.sumnumber != null and pd.sumnumber != ''">
			and SUMNUMBER = #{pd.sumnumber,jdbcType=NVARCHAR}
		</if>
		<if test="pd.fileyear != null and pd.fileyear != ''">
			and FILEYEAR = #{pd.fileyear,jdbcType=NVARCHAR}
		</if>
		<if test="pd.validperiod != null and pd.validperiod != ''">
			and VALIDPERIOD = #{pd.validperiod,jdbcType=INTEGER}
		</if>
		<if test="pd.secretlevel != null and  pd.secretlevel != ''">
			and SECRETLEVEL = #{pd.secretlevel,jdbcType=NVARCHAR}
		</if>
		<if test="pd.pages != null and pd.pages != ''">
			and PAGES = #{pd.pages,jdbcType=INTEGER}
		</if>
		<if test="pd.subcopies != null and pd.subcopies != ''">
			and SUBCOPIES = #{pd.subcopies,jdbcType=INTEGER}
		</if>

		<if test="pd.superordinateclass != null and pd.superordinateclass != ''">
			and Superordinateclass =
			#{pd.superordinateclass,jdbcType=NVARCHAR}
		</if>
		<if test="pd.subordinateclass != null and pd.subordinateclass != ''">
			and SubordinateCLASS =
			#{pd.subordinateclass,jdbcType=NVARCHAR}
		</if>
		<if test="pd.medianclass != null and pd.medianclass != ''">
			and Medianclass = #{pd.medianclass,jdbcType=NVARCHAR}
		</if>
		<if test="pd.spec != null and  pd.spec != ''">
			and spec = #{pd.spec,jdbcType=NVARCHAR}
		</if>
		<if test="pd.carrier != null and pd.carrier != ''">
			and carrier = #{pd.carrier,jdbcType=NVARCHAR}
		</if>
		<if test="pd.pagination != null and pd.pagination != ''">
			and pagination = #{pd.pagination,jdbcType=INTEGER}
		</if>
		<if test="pd.docid != null and pd.docid != ''">
			and docid = #{pd.docid,jdbcType=NVARCHAR}
		</if>
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Aug 24 
			11:10:45 CST 2017. -->
		delete from fms_docmain
		where ID = #{id,jdbcType=CHAR}
	</delete>
	<insert id="insert" parameterType="FmsDocMain">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Aug 24 
			11:10:45 CST 2017. -->
		insert into fms_docmain (ID, fms_ID, USER_ID, TITLE,
		KEYWORD, PRECISE,
		CLASSTYPE,
		OWNER, SUBOWNER, DOCNUM,
		SEQUENCENUM, PS, DOCLEVEL,
		CREATETIME, SFNUMBER, SFTIIME,
		SUMNUMBER, FILEYEAR, VALIDPERIOD,
		SECRETLEVEL, PAGES, SUBCOPIES,
		ISVALID, Superordinateclass,
		SubordinateCLASS,
		Medianclass, spec, carrier,
		"pagination", docid)
		values (#{id,jdbcType=CHAR}, #{fmsId,jdbcType=CHAR},
		#{userId,jdbcType=CHAR}, #{title,jdbcType=NVARCHAR},
		#{keyword,jdbcType=NVARCHAR}, #{precise,jdbcType=NVARCHAR},
		#{classtype,jdbcType=NVARCHAR},
		#{owner,jdbcType=NVARCHAR},
		#{subowner,jdbcType=NVARCHAR}, #{docnum,jdbcType=NVARCHAR},
		#{sequencenum,jdbcType=NVARCHAR}, #{ps,jdbcType=NVARCHAR},
		#{doclevel,jdbcType=NVARCHAR},
		#{createtime,jdbcType=TIMESTAMP},
		#{sfnumber,jdbcType=NVARCHAR}, #{sftiime,jdbcType=TIMESTAMP},
		#{sumnumber,jdbcType=NVARCHAR}, #{fileyear,jdbcType=NVARCHAR},
		#{validperiod,jdbcType=INTEGER},
		#{secretlevel,jdbcType=NVARCHAR},
		#{pages,jdbcType=INTEGER}, #{subcopies,jdbcType=INTEGER},
		#{isvalid,jdbcType=NUMERIC}, #{superordinateclass,jdbcType=NVARCHAR},
		#{subordinateclass,jdbcType=NVARCHAR},
		#{medianclass,jdbcType=NVARCHAR}, #{spec,jdbcType=NVARCHAR},
		#{carrier,jdbcType=NVARCHAR},
		#{pagination,jdbcType=INTEGER},
		#{docid,jdbcType=NVARCHAR})
	</insert>
	<insert id="insertSelective" parameterType="FmsDocMain">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Aug 24 
			11:10:45 CST 2017. -->
		insert into fms_docmain
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				ID,
			</if>
			<if test="fmsId != null">
				fms_ID,
			</if>
			<if test="userId != null">
				USER_ID,
			</if>
			<if test="title != null">
				TITLE,
			</if>
			<if test="keyword != null">
				KEYWORD,
			</if>
			<if test="precise != null">
				PRECISE,
			</if>
			<if test="classtype != null">
				CLASSTYPE,
			</if>
			<if test="owner != null">
				OWNER,
			</if>
			<if test="subowner != null">
				SUBOWNER,
			</if>
			<if test="docnum != null">
				DOCNUM,
			</if>
			<if test="sequencenum != null">
				SEQUENCENUM,
			</if>
			<if test="ps != null">
				PS,
			</if>
			<if test="doclevel != null">
				DOCLEVEL,
			</if>
			<if test="createtime != null">
				CREATETIME,
			</if>
			<if test="sfnumber != null">
				SFNUMBER,
			</if>
			<if test="sftiime != null">
				SFTIIME,
			</if>
			<if test="sumnumber != null">
				SUMNUMBER,
			</if>
			<if test="fileyear != null">
				FILEYEAR,
			</if>
			<if test="validperiod != null">
				VALIDPERIOD,
			</if>
			<if test="secretlevel != null">
				SECRETLEVEL,
			</if>
			<if test="pages != null">
				PAGES,
			</if>
			<if test="subcopies != null">
				SUBCOPIES,
			</if>
			<if test="isvalid != null">
				ISVALID,
			</if>
			<if test="superordinateclass != null">
				Superordinateclass,
			</if>
			<if test="subordinateclass != null">
				SubordinateCLASS,
			</if>
			<if test="medianclass != null">
				Medianclass,
			</if>
			<if test="spec != null">
				spec,
			</if>
			<if test="carrier != null">
				carrier,
			</if>
			<if test="pagination != null">
				pagination,
			</if>
			<if test="docid != null">
				docid,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=CHAR},
			</if>
			<if test="fmsId != null">
				#{fmsId,jdbcType=CHAR},
			</if>
			<if test="userId != null">
				#{userId,jdbcType=CHAR},
			</if>
			<if test="title != null">
				#{title,jdbcType=NVARCHAR},
			</if>
			<if test="keyword != null">
				#{keyword,jdbcType=NVARCHAR},
			</if>
			<if test="precise != null">
				#{precise,jdbcType=NVARCHAR},
			</if>
			<if test="classtype != null">
				#{classtype,jdbcType=NVARCHAR},
			</if>
			<if test="owner != null">
				#{owner,jdbcType=NVARCHAR},
			</if>
			<if test="subowner != null">
				#{subowner,jdbcType=NVARCHAR},
			</if>
			<if test="docnum != null">
				#{docnum,jdbcType=NVARCHAR},
			</if>
			<if test="sequencenum != null">
				#{sequencenum,jdbcType=NVARCHAR},
			</if>
			<if test="ps != null">
				#{ps,jdbcType=NVARCHAR},
			</if>
			<if test="doclevel != null">
				#{doclevel,jdbcType=NVARCHAR},
			</if>
			<if test="createtime != null">
				#{createtime,jdbcType=TIMESTAMP},
			</if>
			<if test="sfnumber != null">
				#{sfnumber,jdbcType=NVARCHAR},
			</if>
			<if test="sftiime != null">
				#{sftiime,jdbcType=TIMESTAMP},
			</if>
			<if test="sumnumber != null">
				#{sumnumber,jdbcType=NVARCHAR},
			</if>
			<if test="fileyear != null">
				#{fileyear,jdbcType=NVARCHAR},
			</if>
			<if test="validperiod != null">
				#{validperiod,jdbcType=INTEGER},
			</if>
			<if test="secretlevel != null">
				#{secretlevel,jdbcType=NVARCHAR},
			</if>
			<if test="pages != null">
				#{pages,jdbcType=INTEGER},
			</if>
			<if test="subcopies != null">
				#{subcopies,jdbcType=INTEGER},
			</if>
			<if test="isvalid != null">
				#{isvalid,jdbcType=NUMERIC},
			</if>
			<if test="superordinateclass != null">
				#{superordinateclass,jdbcType=NVARCHAR},
			</if>
			<if test="subordinateclass != null">
				#{subordinateclass,jdbcType=NVARCHAR},
			</if>
			<if test="medianclass != null">
				#{medianclass,jdbcType=NVARCHAR},
			</if>
			<if test="spec != null">
				#{spec,jdbcType=NVARCHAR},
			</if>
			<if test="carrier != null">
				#{carrier,jdbcType=NVARCHAR},
			</if>
			<if test="pagination != null">
				#{pagination,jdbcType=INTEGER},
			</if>
			<if test="docid != null">
				#{docid,jdbcType=NVARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="FmsDocMain">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Aug 24 
			11:10:45 CST 2017. -->
		update fms_docmain
		<set>
			<if test="fmsId != null">
				fms_ID = #{fmsId,jdbcType=CHAR},
			</if>
			<if test="userId != null">
				USER_ID = #{userId,jdbcType=CHAR},
			</if>
			<if test="title != null">
				TITLE = #{title,jdbcType=NVARCHAR},
			</if>
			<if test="keyword != null">
				KEYWORD = #{keyword,jdbcType=NVARCHAR},
			</if>
			<if test="precise != null">
				PRECISE = #{precise,jdbcType=NVARCHAR},
			</if>
			<if test="classtype != null">
				CLASSTYPE = #{classtype,jdbcType=NVARCHAR},
			</if>
			<if test="owner != null">
				OWNER = #{owner,jdbcType=NVARCHAR},
			</if>
			<if test="subowner != null">
				SUBOWNER = #{subowner,jdbcType=NVARCHAR},
			</if>
			<if test="docnum != null">
				DOCNUM = #{docnum,jdbcType=NVARCHAR},
			</if>
			<if test="sequencenum != null">
				SEQUENCENUM = #{sequencenum,jdbcType=NVARCHAR},
			</if>
			<if test="ps != null">
				PS = #{ps,jdbcType=NVARCHAR},
			</if>
			<if test="doclevel != null">
				DOCLEVEL = #{doclevel,jdbcType=NVARCHAR},
			</if>
			<if test="createtime != null">
				CREATETIME = #{createtime,jdbcType=TIMESTAMP},
			</if>
			<if test="sfnumber != null">
				SFNUMBER = #{sfnumber,jdbcType=NVARCHAR},
			</if>
			<if test="sftiime != null">
				SFTIIME = #{sftiime,jdbcType=TIMESTAMP},
			</if>
			<if test="sumnumber != null">
				SUMNUMBER = #{sumnumber,jdbcType=NVARCHAR},
			</if>
			<if test="fileyear != null">
				FILEYEAR = #{fileyear,jdbcType=NVARCHAR},
			</if>
			<if test="validperiod != null">
				VALIDPERIOD = #{validperiod,jdbcType=INTEGER},
			</if>
			<if test="secretlevel != null">
				SECRETLEVEL = #{secretlevel,jdbcType=NVARCHAR},
			</if>
			<if test="pages != null">
				PAGES = #{pages,jdbcType=INTEGER},
			</if>
			<if test="subcopies != null">
				SUBCOPIES = #{subcopies,jdbcType=INTEGER},
			</if>
			<if test="isvalid != null">
				ISVALID = #{isvalid,jdbcType=NUMERIC},
			</if>
			<if test="superordinateclass != null">
				Superordinateclass =
				#{superordinateclass,jdbcType=NVARCHAR},
			</if>
			<if test="subordinateclass != null">
				SubordinateCLASS = #{subordinateclass,jdbcType=NVARCHAR},
			</if>
			<if test="medianclass != null">
				Medianclass = #{medianclass,jdbcType=NVARCHAR},
			</if>
			<if test="spec != null">
				spec = #{spec,jdbcType=NVARCHAR},
			</if>
			<if test="carrier != null">
				carrier = #{carrier,jdbcType=NVARCHAR},
			</if>
			<if test="pagination != null">
				pagination = #{pagination,jdbcType=INTEGER},
			</if>
			<if test="docid != null">
				docid = #{docid,jdbcType=NVARCHAR},
			</if>
		</set>
		where ID = #{id,jdbcType=CHAR}
	</update>
	<update id="updateByPrimaryKey" parameterType="FmsDocMain">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Aug 24 
			11:10:45 CST 2017. -->
		update fms_docmain
		set fms_ID = #{fmsId,jdbcType=CHAR},
		USER_ID =
		#{userId,jdbcType=CHAR},
		TITLE = #{title,jdbcType=NVARCHAR},
		KEYWORD =
		#{keyword,jdbcType=NVARCHAR},
		PRECISE = #{precise,jdbcType=NVARCHAR},
		CLASSTYPE = #{classtype,jdbcType=NVARCHAR},
		OWNER =
		#{owner,jdbcType=NVARCHAR},
		SUBOWNER = #{subowner,jdbcType=NVARCHAR},
		DOCNUM = #{docnum,jdbcType=NVARCHAR},
		SEQUENCENUM =
		#{sequencenum,jdbcType=NVARCHAR},
		PS = #{ps,jdbcType=NVARCHAR},
		DOCLEVEL = #{doclevel,jdbcType=NVARCHAR},
		CREATETIME =
		#{createtime,jdbcType=TIMESTAMP},
		SFNUMBER =
		#{sfnumber,jdbcType=NVARCHAR},
		SFTIIME = #{sftiime,jdbcType=TIMESTAMP},
		SUMNUMBER = #{sumnumber,jdbcType=NVARCHAR},
		FILEYEAR =
		#{fileyear,jdbcType=NVARCHAR},
		VALIDPERIOD =
		#{validperiod,jdbcType=INTEGER},
		SECRETLEVEL =
		#{secretlevel,jdbcType=NVARCHAR},
		PAGES = #{pages,jdbcType=INTEGER},
		SUBCOPIES = #{subcopies,jdbcType=INTEGER},
		ISVALID =
		#{isvalid,jdbcType=NUMERIC},
		Superordinateclass =
		#{superordinateclass,jdbcType=NVARCHAR},
		SubordinateCLASS =
		#{subordinateclass,jdbcType=NVARCHAR},
		Medianclass =
		#{medianclass,jdbcType=NVARCHAR},
		spec = #{spec,jdbcType=NVARCHAR},
		carrier = #{carrier,jdbcType=NVARCHAR},
		pagination =
		#{pagination,jdbcType=INTEGER},
		docid = #{docid,jdbcType=NVARCHAR}
		where ID = #{id,jdbcType=CHAR}
	</update>

	<!-- 删除文书 -->
	<update id="updateDocISVALID" parameterType="pd" flushCache="false">
		update fms_docmain set
		ISVALID = '0'
		where ID = #{id}
	</update>
	<update id="updateDocISVALIDbyfmsid" parameterType="pd"
		flushCache="false">
		update fms_docmain set
		ISVALID = '0'
		where fms_ID = #{id} and
		ISVALID = '1'
	</update>

	<!--excel -->
	<select id="findDocLogByMouth" parameterType="java.util.Date"
		resultType="pd">
		SELECT a.*,d.[VALUE] from (
		SELECT d.docid,d.TITLE,
		CONVERT(VARCHAR(19),d.SFTIIME,101) as
		SFTIIME,d.PAGES,d.USER_ID,u.USERNAME ,u.NAME,d.DOCLEVEL from
		fms_docmain d LEFT JOIN sys_user u on d.USER_ID=u.USER_ID where
		datediff(month,d.CREATETIME,#{date})=0  


		) a LEFT JOIN
		fms_datadict_item d on a.DOCLEVEL=d.NAME
		<!-- SELECT d.docid,d.TITLE, CONVERT(VARCHAR(19),d.SFTIIME,101) as SFTIIME,d.PAGES,d.USER_ID,u.USERNAME 
			from fms_docmain d LEFT JOIN sys_user u on d.USER_ID=u.USER_ID where datediff(month,d.CREATETIME,#{date})=0   -->

	</select>
	
	<select id="getCountByyearAndcarrier" resultType="pd">
		select count(1) as count ,FILEYEAR,carrier from  fms_docmain  group by carrier, FILEYEAR ORDER by FILEYEAR 
	</select>
	
	<select id="getCountBycarrier" resultType="pd">
		select count(1) as count ,carrier from  fms_docmain  group by carrier ORDER by carrier 
	</select>
	<select id="getCountByyear" resultType="pd">
		select count(1) as count ,FILEYEAR from  fms_docmain  group by FILEYEAR   ORDER by FILEYEAR 
	</select>
	<!--excel -->
	<select id="findDocLog" resultType="pd">

		SELECT
		a.*, b.NAME AS dpname
		FROM
		(
		SELECT
		d.docid,
		d.TITLE,
		CONVERT (VARCHAR(19), d.SFTIIME, 101) AS SFTIIME,
		d.PAGES,
		d.USER_ID,
		u.NAME,
		d.OWNER
		FROM
		fms_docmain d
		LEFT JOIN sys_user u ON d.USER_ID = u.USER_ID
		) a
		LEFT JOIN oa_department b ON a.OWNER = b.DEPARTMENT_ID
	</select>
</mapper>