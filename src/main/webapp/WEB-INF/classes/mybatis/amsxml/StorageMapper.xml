<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="StorageMapper">
  <resultMap id="BaseResultMap" type="com.fh.entity.amsmodel.Storage">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 09 09:42:51 CST 2016.
    -->
    <id column="REGISTER_ID" jdbcType="INTEGER" property="registerId" />
    <result column="REGISTER" jdbcType="CHAR" property="register" />
    <result column="REGIST_TIME" jdbcType="TIMESTAMP" property="registTime" />
    <result column="PRJROOT" jdbcType="NVARCHAR" property="prjroot" />
    <result column="DELETE_TIME" jdbcType="TIMESTAMP" property="deleteTime" />
    <result column="DELETE_WHY" jdbcType="NVARCHAR" property="deleteWhy" />
    <result column="DELETE_PERMISSION" jdbcType="NVARCHAR" property="deletePermission" />
    <result column="STORAGE_ID" jdbcType="INTEGER" property="storageId" />
    <result column="STORAGE_REMARK" jdbcType="NVARCHAR" property="storageRemark" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 09 09:42:51 CST 2016.
    -->
    REGISTER_ID, REGISTER, REGIST_TIME, PRJROOT, DELETE_TIME, DELETE_WHY, DELETE_PERMISSION, 
    STORAGE_ID, STORAGE_REMARK
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 09 09:42:51 CST 2016.
    -->
    select 
    <include refid="Base_Column_List" />
    from ams_storage
    where REGISTER_ID = #{registerId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 09 09:42:51 CST 2016.
    -->
    delete from ams_storage
    where REGISTER_ID = #{registerId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.fh.entity.amsmodel.Storage">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 09 09:42:51 CST 2016.
    -->
    insert into ams_storage (REGISTER_ID, REGISTER, REGIST_TIME, 
      PRJROOT, DELETE_TIME, DELETE_WHY, 
      DELETE_PERMISSION, STORAGE_ID, STORAGE_REMARK
      )
    values (#{registerId,jdbcType=INTEGER}, #{register,jdbcType=CHAR}, #{registTime,jdbcType=TIMESTAMP}, 
      #{prjroot,jdbcType=NVARCHAR}, #{deleteTime,jdbcType=TIMESTAMP}, #{deleteWhy,jdbcType=NVARCHAR}, 
      #{deletePermission,jdbcType=NVARCHAR}, #{storageId,jdbcType=INTEGER}, #{storageRemark,jdbcType=NVARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.fh.entity.amsmodel.Storage" keyProperty="registerId" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 09 09:42:51 CST 2016.
    -->
    insert into ams_storage
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="registerId != null">
        REGISTER_ID,
      </if>
      <if test="register != null">
        REGISTER,
      </if>
      <if test="registTime != null">
        REGIST_TIME,
      </if>
      <if test="prjroot != null">
        PRJROOT,
      </if>
      <if test="deleteTime != null">
        DELETE_TIME,
      </if>
      <if test="deleteWhy != null">
        DELETE_WHY,
      </if>
      <if test="deletePermission != null">
        DELETE_PERMISSION,
      </if>
      <if test="storageId != null">
        STORAGE_ID,
      </if>
      <if test="storageRemark != null">
        STORAGE_REMARK,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="registerId != null">
        #{registerId,jdbcType=INTEGER},
      </if>
      <if test="register != null">
        #{register,jdbcType=CHAR},
      </if>
      <if test="registTime != null">
        #{registTime,jdbcType=TIMESTAMP},
      </if>
      <if test="prjroot != null">
        #{prjroot,jdbcType=NVARCHAR},
      </if>
      <if test="deleteTime != null">
        #{deleteTime,jdbcType=TIMESTAMP},
      </if>
      <if test="deleteWhy != null">
        #{deleteWhy,jdbcType=NVARCHAR},
      </if>
      <if test="deletePermission != null">
        #{deletePermission,jdbcType=NVARCHAR},
      </if>
      <if test="storageId != null">
        #{storageId,jdbcType=INTEGER},
      </if>
      <if test="storageRemark != null">
        #{storageRemark,jdbcType=NVARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.fh.entity.amsmodel.Storage">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 09 09:42:51 CST 2016.
    -->
    update ams_storage
    <set>
      <if test="register != null">
        REGISTER = #{register,jdbcType=CHAR},
      </if>
      <if test="registTime != null">
        REGIST_TIME = #{registTime,jdbcType=TIMESTAMP},
      </if>
      <if test="prjroot != null">
        PRJROOT = #{prjroot,jdbcType=NVARCHAR},
      </if>
      <if test="deleteTime != null">
        DELETE_TIME = #{deleteTime,jdbcType=TIMESTAMP},
      </if>
      <if test="deleteWhy != null">
        DELETE_WHY = #{deleteWhy,jdbcType=NVARCHAR},
      </if>
      <if test="deletePermission != null">
        DELETE_PERMISSION = #{deletePermission,jdbcType=NVARCHAR},
      </if>
      <if test="storageId != null">
        STORAGE_ID = #{storageId,jdbcType=INTEGER},
      </if>
      <if test="storageRemark != null">
        STORAGE_REMARK = #{storageRemark,jdbcType=NVARCHAR},
      </if>
    </set>
    where REGISTER_ID = #{registerId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.fh.entity.amsmodel.Storage">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 09 09:42:51 CST 2016.
    -->
    update ams_storage
    set REGISTER = #{register,jdbcType=CHAR},
      REGIST_TIME = #{registTime,jdbcType=TIMESTAMP},
      PRJROOT = #{prjroot,jdbcType=NVARCHAR},
      DELETE_TIME = #{deleteTime,jdbcType=TIMESTAMP},
      DELETE_WHY = #{deleteWhy,jdbcType=NVARCHAR},
      DELETE_PERMISSION = #{deletePermission,jdbcType=NVARCHAR},
      STORAGE_ID = #{storageId,jdbcType=INTEGER},
      STORAGE_REMARK = #{storageRemark,jdbcType=NVARCHAR}
    where REGISTER_ID = #{registerId,jdbcType=INTEGER}
  </update>
  
  
  
  
  
  	<!-- 20160805 11:31:03 kioor -->

	<sql id="tableName">
		ams_storage
	</sql>
  
	<select id="storagelistPage" parameterType="page" resultType="pd">
		select
		<include refid="Base_Column_List" />
		from
		<include refid="tableName" />
		where 1=1
		<if test="pd.keywords!= null and pd.keywords != ''"><!-- 关键词检索 -->
			and
			(
			REGISTER_ID LIKE CONCAT(CONCAT('%', #{pd.keywords}),'%')
			or
			STORAGE_ID LIKE CONCAT(CONCAT('%', #{pd.keywords}),'%')
			)

		</if>
	</select>
	
 	<delete flushCache="false" id="delete" parameterType="pd">
		delete from
		<include refid="tableName" />
		where
		REGISTER_ID = #{REGISTER_ID}
	</delete>
  
  	<insert id="save" parameterType="pd">
		insert into
		<include refid="tableName" />
		(
		<include refid="ValueTemp" />
		) values (
		<include refid="FieldValueTemp" />
		)

	</insert>
		
	<insert id="savestorage" keyProperty="registerId" parameterType="Storage" useGeneratedKeys="true">
		insert into
		<include refid="tableName" />
		(
		<include refid="ValueTemp" />
		) values (
		<include refid="FieldValueTemp2" />
		)
		
	</insert>
	
  
  	
	<sql id="ValueTemp">
		REGISTER,
		REGIST_TIME,
		PRJROOT,
		DELETE_TIME,
		DELETE_WHY,
		DELETE_PERMISSION,
		STORAGE_ID,
		STORAGE_REMARK
	</sql>

	<sql id="FieldValueTemp">
		#{REGISTER},
		#{REGIST_TIME},
		#{PRJROOT},
		#{DELETE_TIME},
		#{DELETE_WHY},
		#{DELETE_PERMISSION},
		#{STORAGE_ID},
		#{STORAGE_REMARK}
	</sql>
  
  
	<sql id="FieldValueTemp2">
		#{register},
		#{registTime},
		#{prjroot},
		#{deleteTime},
		#{deleteWhy},
		#{deletePermission},
		#{storageId},
		#{storageRemark}
	</sql>
  
  
  
  
	<!-- 判断字段storageid -->
	<select id="getStorageInfo" parameterType="pd" resultType="pd">
		select
		<include refid="Base_Column_List"></include>
		from
		<include refid="tableName"></include>
		where 1=1
		<if test="STORAGE_ID!=null">
			and STORAGE_ID = #{storageid}
		</if>
	</select>
  
  
</mapper>